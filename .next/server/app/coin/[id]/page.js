(()=>{var e={};e.id=637,e.ids=[637],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},86624:e=>{"use strict";e.exports=require("querystring")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},48948:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>u,routeModule:()=>d,tree:()=>l}),r(97946),r(53768),r(35866);var i=r(23191),s=r(88716),n=r(37922),o=r.n(n),a=r(95231),c={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>a[e]);r.d(t,c);let l=["",{children:["coin",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,97946)),"/Users/bash/Documents/GitHub/crypticApp/src/app/coin/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,53768)),"/Users/bash/Documents/GitHub/crypticApp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/bash/Documents/GitHub/crypticApp/src/app/coin/[id]/page.tsx"],h="/coin/[id]/page",p={require:r,loadChunk:()=>Promise.resolve()},d=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/coin/[id]/page",pathname:"/coin/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9246:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},82829:(e,t,r)=>{Promise.resolve().then(r.bind(r,58768)),Promise.resolve().then(r.bind(r,51689)),Promise.resolve().then(r.bind(r,6660)),Promise.resolve().then(r.bind(r,58634))},20573:(e,t,r)=>{Promise.resolve().then(r.bind(r,8946))},58768:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>n});var i=r(10326),s=r(18206);function n({children:e}){return i.jsx(s.dr,{children:e})}},8946:(e,t,r)=>{"use strict";r.d(t,{CoinDetails:()=>eN});var i,s,n,o,a=r(10326),c=r(17577),l=r(65826);let u=/\r\n|[\n\r]/g;function h(e,t){let r=0,i=1;for(let s of e.body.matchAll(u)){if("number"==typeof s.index||function(e,t){if(!e)throw Error("Unexpected invariant triggered.")}(!1),s.index>=t)break;r=s.index+s[0].length,i+=1}return{line:i,column:t+1-r}}function p(e,t){let r=e.locationOffset.column-1,i="".padStart(r)+e.body,s=t.line-1,n=e.locationOffset.line-1,o=t.line+n,a=1===t.line?r:0,c=t.column+a,l=`${e.name}:${o}:${c}
`,u=i.split(/\r\n|[\n\r]/g),h=u[s];if(h.length>120){let e=Math.floor(c/80),t=[];for(let e=0;e<h.length;e+=80)t.push(h.slice(e,e+80));return l+d([[`${o} |`,t[0]],...t.slice(1,e+1).map(e=>["|",e]),["|","^".padStart(c%80)],["|",t[e+1]]])}return l+d([[`${o-1} |`,u[s-1]],[`${o} |`,h],["|","^".padStart(c)],[`${o+1} |`,u[s+1]]])}function d(e){let t=e.filter(([e,t])=>void 0!==t),r=Math.max(...t.map(([e])=>e.length));return t.map(([e,t])=>e.padStart(r)+(t?" "+t:"")).join("\n")}class f extends Error{constructor(e,...t){var r,i,s;let{nodes:n,source:o,positions:a,path:c,originalError:l,extensions:u}=function(e){let t=e[0];return null==t||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}(t);super(e),this.name="GraphQLError",this.path=null!=c?c:void 0,this.originalError=null!=l?l:void 0,this.nodes=_(Array.isArray(n)?n:n?[n]:void 0);let p=_(null===(r=this.nodes)||void 0===r?void 0:r.map(e=>e.loc).filter(e=>null!=e));this.source=null!=o?o:null==p?void 0:null===(i=p[0])||void 0===i?void 0:i.source,this.positions=null!=a?a:null==p?void 0:p.map(e=>e.start),this.locations=a&&o?a.map(e=>h(o,e)):null==p?void 0:p.map(e=>h(e.source,e.start));let d=!function(e){return"object"==typeof e&&null!==e}(null==l?void 0:l.extensions)?void 0:null==l?void 0:l.extensions;this.extensions=null!==(s=null!=u?u:d)&&void 0!==s?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=l&&l.stack?Object.defineProperty(this,"stack",{value:l.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,f):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes){for(let r of this.nodes)if(r.loc){var t;e+="\n\n"+p((t=r.loc).source,h(t.source,t.start))}}else if(this.source&&this.locations)for(let t of this.locations)e+="\n\n"+p(this.source,t);return e}toJSON(){let e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function _(e){return void 0===e||0===e.length?void 0:e}function m(e,t,r){return new f(`Syntax Error: ${r}`,{source:e,positions:[t]})}var g=r(82669);!function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"}(i||(i={}));var y=r(51971),w=r(35409),v=r(41733);!function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.DOT=".",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"}(s||(s={}));class b{constructor(e){let t=new g.WU(s.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==s.EOF)do if(e.next)e=e.next;else{let t=function(e,t){let r=e.source.body,i=r.length,n=t;for(;n<i;){let t=r.charCodeAt(n);switch(t){case 65279:case 9:case 32:case 44:++n;continue;case 10:++n,++e.line,e.lineStart=n;continue;case 13:10===r.charCodeAt(n+1)?n+=2:++n,++e.line,e.lineStart=n;continue;case 35:return function(e,t){let r=e.source.body,i=r.length,n=t+1;for(;n<i;){let e=r.charCodeAt(n);if(10===e||13===e)break;if(x(e))++n;else if(k(r,n))n+=2;else break}return S(e,s.COMMENT,t,n,r.slice(t+1,n))}(e,n);case 33:return S(e,s.BANG,n,n+1);case 36:return S(e,s.DOLLAR,n,n+1);case 38:return S(e,s.AMP,n,n+1);case 40:return S(e,s.PAREN_L,n,n+1);case 41:return S(e,s.PAREN_R,n,n+1);case 46:if(46===r.charCodeAt(n+1)&&46===r.charCodeAt(n+2))return S(e,s.SPREAD,n,n+3);break;case 58:return S(e,s.COLON,n,n+1);case 61:return S(e,s.EQUALS,n,n+1);case 64:return S(e,s.AT,n,n+1);case 91:return S(e,s.BRACKET_L,n,n+1);case 93:return S(e,s.BRACKET_R,n,n+1);case 123:return S(e,s.BRACE_L,n,n+1);case 124:return S(e,s.PIPE,n,n+1);case 125:return S(e,s.BRACE_R,n,n+1);case 34:if(34===r.charCodeAt(n+1)&&34===r.charCodeAt(n+2))return function(e,t){let r=e.source.body,i=r.length,n=e.lineStart,o=t+3,a=o,c="",l=[];for(;o<i;){let i=r.charCodeAt(o);if(34===i&&34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2)){c+=r.slice(a,o),l.push(c);let i=S(e,s.BLOCK_STRING,t,o+3,(0,w.wv)(l).join("\n"));return e.line+=l.length-1,e.lineStart=n,i}if(92===i&&34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2)&&34===r.charCodeAt(o+3)){c+=r.slice(a,o),a=o+1,o+=4;continue}if(10===i||13===i){c+=r.slice(a,o),l.push(c),13===i&&10===r.charCodeAt(o+1)?o+=2:++o,c="",a=o,n=o;continue}if(x(i))++o;else if(k(r,o))o+=2;else throw m(e.source,o,`Invalid character within String: ${A(e,o)}.`)}throw m(e.source,o,"Unterminated string.")}(e,n);return function(e,t){let r=e.source.body,i=r.length,n=t+1,o=n,a="";for(;n<i;){let i=r.charCodeAt(n);if(34===i)return a+=r.slice(o,n),S(e,s.STRING,t,n+1,a);if(92===i){a+=r.slice(o,n);let t=117===r.charCodeAt(n+1)?123===r.charCodeAt(n+2)?function(e,t){let r=e.source.body,i=0,s=3;for(;s<12;){let e=r.charCodeAt(t+s++);if(125===e){if(s<5||!x(i))break;return{value:String.fromCodePoint(i),size:s}}if((i=i<<4|C(e))<0)break}throw m(e.source,t,`Invalid Unicode escape sequence: "${r.slice(t,t+s)}".`)}(e,n):function(e,t){let r=e.source.body,i=O(r,t+2);if(x(i))return{value:String.fromCodePoint(i),size:6};if(E(i)&&92===r.charCodeAt(t+6)&&117===r.charCodeAt(t+7)){let e=O(r,t+8);if(T(e))return{value:String.fromCodePoint(i,e),size:12}}throw m(e.source,t,`Invalid Unicode escape sequence: "${r.slice(t,t+6)}".`)}(e,n):function(e,t){let r=e.source.body;switch(r.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw m(e.source,t,`Invalid character escape sequence: "${r.slice(t,t+2)}".`)}(e,n);a+=t.value,n+=t.size,o=n;continue}if(10===i||13===i)break;if(x(i))++n;else if(k(r,n))n+=2;else throw m(e.source,n,`Invalid character within String: ${A(e,n)}.`)}throw m(e.source,n,"Unterminated string.")}(e,n)}if((0,v.X1)(t)||45===t)return function(e,t,r){let i=e.source.body,n=t,o=r,a=!1;if(45===o&&(o=i.charCodeAt(++n)),48===o){if(o=i.charCodeAt(++n),(0,v.X1)(o))throw m(e.source,n,`Invalid number, unexpected digit after 0: ${A(e,n)}.`)}else n=N(e,n,o),o=i.charCodeAt(n);if(46===o&&(a=!0,o=i.charCodeAt(++n),n=N(e,n,o),o=i.charCodeAt(n)),(69===o||101===o)&&(a=!0,(43===(o=i.charCodeAt(++n))||45===o)&&(o=i.charCodeAt(++n)),n=N(e,n,o),o=i.charCodeAt(n)),46===o||(0,v.LQ)(o))throw m(e.source,n,`Invalid number, expected digit but got: ${A(e,n)}.`);return S(e,a?s.FLOAT:s.INT,t,n,i.slice(t,n))}(e,n,t);if((0,v.LQ)(t))return function(e,t){let r=e.source.body,i=r.length,n=t+1;for(;n<i;){let e=r.charCodeAt(n);if((0,v.HQ)(e))++n;else break}return S(e,s.NAME,t,n,r.slice(t,n))}(e,n);throw m(e.source,n,39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":x(t)||k(r,n)?`Unexpected character: ${A(e,n)}.`:`Invalid character: ${A(e,n)}.`)}return S(e,s.EOF,i,i)}(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===s.COMMENT);return e}}function x(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function k(e,t){return E(e.charCodeAt(t))&&T(e.charCodeAt(t+1))}function E(e){return e>=55296&&e<=56319}function T(e){return e>=56320&&e<=57343}function A(e,t){let r=e.source.body.codePointAt(t);if(void 0===r)return s.EOF;if(r>=32&&r<=126){let e=String.fromCodePoint(r);return'"'===e?"'\"'":`"${e}"`}return"U+"+r.toString(16).toUpperCase().padStart(4,"0")}function S(e,t,r,i,s){let n=e.line,o=1+r-e.lineStart;return new g.WU(t,r,i,n,o,s)}function N(e,t,r){if(!(0,v.X1)(r))throw m(e.source,t,`Invalid number, expected digit but got: ${A(e,t)}.`);let i=e.source.body,s=t+1;for(;(0,v.X1)(i.charCodeAt(s));)++s;return s}function O(e,t){return C(e.charCodeAt(t))<<12|C(e.charCodeAt(t+1))<<8|C(e.charCodeAt(t+2))<<4|C(e.charCodeAt(t+3))}function C(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}var D=r(35475),P=r(25520);let j=globalThis.process?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if("object"==typeof e&&null!==e){var r;let i=t.prototype[Symbol.toStringTag];if(i===(Symbol.toStringTag in e?e[Symbol.toStringTag]:null===(r=e.constructor)||void 0===r?void 0:r.name)){let t=(0,P.X)(e);throw Error(`Cannot use ${i} "${t}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class R{constructor(e,t="GraphQL request",r={line:1,column:1}){"string"==typeof e||(0,D.a)(!1,`Body must be a string. Received: ${(0,P.X)(e)}.`),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||(0,D.a)(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||(0,D.a)(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}class I{constructor(e,t={}){let{lexer:r,...i}=t;if(r)this._lexer=r;else{let t=j(e,R)?e:new R(e);this._lexer=new b(t)}this._options=i,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){let e=this.expectToken(s.NAME);return this.node(e,{kind:y.h.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:y.h.DOCUMENT,definitions:this.many(s.SOF,this.parseDefinition,s.EOF)})}parseDefinition(){if(this.peek(s.BRACE_L))return this.parseOperationDefinition();let e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(e&&t.kind===s.BRACE_L)throw m(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are not supported on shorthand queries.");if(t.kind===s.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition()}if(e)throw m(this._lexer.source,this._lexer.token.start,"Unexpected description, only GraphQL definitions support descriptions.");if("extend"===t.value)return this.parseTypeSystemExtension()}throw this.unexpected(t)}parseOperationDefinition(){let e;let t=this._lexer.token;if(this.peek(s.BRACE_L))return this.node(t,{kind:y.h.OPERATION_DEFINITION,operation:g.ku.QUERY,description:void 0,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});let r=this.parseDescription(),i=this.parseOperationType();return this.peek(s.NAME)&&(e=this.parseName()),this.node(t,{kind:y.h.OPERATION_DEFINITION,operation:i,description:r,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){let e=this.expectToken(s.NAME);switch(e.value){case"query":return g.ku.QUERY;case"mutation":return g.ku.MUTATION;case"subscription":return g.ku.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(s.PAREN_L,this.parseVariableDefinition,s.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:y.h.VARIABLE_DEFINITION,description:this.parseDescription(),variable:this.parseVariable(),type:(this.expectToken(s.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(s.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){let e=this._lexer.token;return this.expectToken(s.DOLLAR),this.node(e,{kind:y.h.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:y.h.SELECTION_SET,selections:this.many(s.BRACE_L,this.parseSelection,s.BRACE_R)})}parseSelection(){return this.peek(s.SPREAD)?this.parseFragment():this.parseField()}parseField(){let e,t;let r=this._lexer.token,i=this.parseName();return this.expectOptionalToken(s.COLON)?(e=i,t=this.parseName()):t=i,this.node(r,{kind:y.h.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(s.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){let t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(s.PAREN_L,t,s.PAREN_R)}parseArgument(e=!1){let t=this._lexer.token,r=this.parseName();return this.expectToken(s.COLON),this.node(t,{kind:y.h.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){let e=this._lexer.token;this.expectToken(s.SPREAD);let t=this.expectOptionalKeyword("on");return!t&&this.peek(s.NAME)?this.node(e,{kind:y.h.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:y.h.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){let e=this._lexer.token,t=this.parseDescription();return(this.expectKeyword("fragment"),!0===this._options.allowLegacyFragmentVariables)?this.node(e,{kind:y.h.FRAGMENT_DEFINITION,description:t,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:y.h.FRAGMENT_DEFINITION,description:t,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){let t=this._lexer.token;switch(t.kind){case s.BRACKET_L:return this.parseList(e);case s.BRACE_L:return this.parseObject(e);case s.INT:return this.advanceLexer(),this.node(t,{kind:y.h.INT,value:t.value});case s.FLOAT:return this.advanceLexer(),this.node(t,{kind:y.h.FLOAT,value:t.value});case s.STRING:case s.BLOCK_STRING:return this.parseStringLiteral();case s.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:y.h.BOOLEAN,value:!0});case"false":return this.node(t,{kind:y.h.BOOLEAN,value:!1});case"null":return this.node(t,{kind:y.h.NULL});default:return this.node(t,{kind:y.h.ENUM,value:t.value})}case s.DOLLAR:if(e){if(this.expectToken(s.DOLLAR),this._lexer.token.kind===s.NAME){let e=this._lexer.token.value;throw m(this._lexer.source,t.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){let e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:y.h.STRING,value:e.value,block:e.kind===s.BLOCK_STRING})}parseList(e){return this.node(this._lexer.token,{kind:y.h.LIST,values:this.any(s.BRACKET_L,()=>this.parseValueLiteral(e),s.BRACKET_R)})}parseObject(e){return this.node(this._lexer.token,{kind:y.h.OBJECT,fields:this.any(s.BRACE_L,()=>this.parseObjectField(e),s.BRACE_R)})}parseObjectField(e){let t=this._lexer.token,r=this.parseName();return this.expectToken(s.COLON),this.node(t,{kind:y.h.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){let t=[];for(;this.peek(s.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){let t=this._lexer.token;return this.expectToken(s.AT),this.node(t,{kind:y.h.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){let e;let t=this._lexer.token;if(this.expectOptionalToken(s.BRACKET_L)){let r=this.parseTypeReference();this.expectToken(s.BRACKET_R),e=this.node(t,{kind:y.h.LIST_TYPE,type:r})}else e=this.parseNamedType();return this.expectOptionalToken(s.BANG)?this.node(t,{kind:y.h.NON_NULL_TYPE,type:e}):e}parseNamedType(){return this.node(this._lexer.token,{kind:y.h.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(s.STRING)||this.peek(s.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");let r=this.parseConstDirectives(),i=this.many(s.BRACE_L,this.parseOperationTypeDefinition,s.BRACE_R);return this.node(e,{kind:y.h.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:i})}parseOperationTypeDefinition(){let e=this._lexer.token,t=this.parseOperationType();this.expectToken(s.COLON);let r=this.parseNamedType();return this.node(e,{kind:y.h.OPERATION_TYPE_DEFINITION,operation:t,type:r})}parseScalarTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");let r=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:y.h.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:i})}parseObjectTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");let r=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),n=this.parseFieldsDefinition();return this.node(e,{kind:y.h.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:i,directives:s,fields:n})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(s.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(s.BRACE_L,this.parseFieldDefinition,s.BRACE_R)}parseFieldDefinition(){let e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),i=this.parseArgumentDefs();this.expectToken(s.COLON);let n=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:y.h.FIELD_DEFINITION,description:t,name:r,arguments:i,type:n,directives:o})}parseArgumentDefs(){return this.optionalMany(s.PAREN_L,this.parseInputValueDef,s.PAREN_R)}parseInputValueDef(){let e;let t=this._lexer.token,r=this.parseDescription(),i=this.parseName();this.expectToken(s.COLON);let n=this.parseTypeReference();this.expectOptionalToken(s.EQUALS)&&(e=this.parseConstValueLiteral());let o=this.parseConstDirectives();return this.node(t,{kind:y.h.INPUT_VALUE_DEFINITION,description:r,name:i,type:n,defaultValue:e,directives:o})}parseInterfaceTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");let r=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),n=this.parseFieldsDefinition();return this.node(e,{kind:y.h.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:i,directives:s,fields:n})}parseUnionTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");let r=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:y.h.UNION_TYPE_DEFINITION,description:t,name:r,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(s.EQUALS)?this.delimitedMany(s.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");let r=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:y.h.ENUM_TYPE_DEFINITION,description:t,name:r,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(s.BRACE_L,this.parseEnumValueDefinition,s.BRACE_R)}parseEnumValueDefinition(){let e=this._lexer.token,t=this.parseDescription(),r=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:y.h.ENUM_VALUE_DEFINITION,description:t,name:r,directives:i})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw m(this._lexer.source,this._lexer.token.start,`${L(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");let r=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:y.h.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(s.BRACE_L,this.parseInputValueDef,s.BRACE_R)}parseTypeSystemExtension(){let e=this._lexer.lookahead();if(e.kind===s.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");let t=this.parseConstDirectives(),r=this.optionalMany(s.BRACE_L,this.parseOperationTypeDefinition,s.BRACE_R);if(0===t.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:y.h.SCHEMA_EXTENSION,directives:t,operationTypes:r})}parseScalarTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");let t=this.parseName(),r=this.parseConstDirectives();if(0===r.length)throw this.unexpected();return this.node(e,{kind:y.h.SCALAR_TYPE_EXTENSION,name:t,directives:r})}parseObjectTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");let t=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(0===r.length&&0===i.length&&0===s.length)throw this.unexpected();return this.node(e,{kind:y.h.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:i,fields:s})}parseInterfaceTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");let t=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(0===r.length&&0===i.length&&0===s.length)throw this.unexpected();return this.node(e,{kind:y.h.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:i,fields:s})}parseUnionTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");let t=this.parseName(),r=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:y.h.UNION_TYPE_EXTENSION,name:t,directives:r,types:i})}parseEnumTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");let t=this.parseName(),r=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:y.h.ENUM_TYPE_EXTENSION,name:t,directives:r,values:i})}parseInputObjectTypeExtension(){let e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");let t=this.parseName(),r=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(0===r.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:y.h.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:i})}parseDirectiveDefinition(){let e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(s.AT);let r=this.parseName(),i=this.parseArgumentDefs(),n=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");let o=this.parseDirectiveLocations();return this.node(e,{kind:y.h.DIRECTIVE_DEFINITION,description:t,name:r,arguments:i,repeatable:n,locations:o})}parseDirectiveLocations(){return this.delimitedMany(s.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){let e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(i,t.value))return t;throw this.unexpected(e)}parseSchemaCoordinate(){let e,t;let r=this._lexer.token,i=this.expectOptionalToken(s.AT),n=this.parseName();return(!i&&this.expectOptionalToken(s.DOT)&&(e=this.parseName()),(i||e)&&this.expectOptionalToken(s.PAREN_L)&&(t=this.parseName(),this.expectToken(s.COLON),this.expectToken(s.PAREN_R)),i)?t?this.node(r,{kind:y.h.DIRECTIVE_ARGUMENT_COORDINATE,name:n,argumentName:t}):this.node(r,{kind:y.h.DIRECTIVE_COORDINATE,name:n}):e?t?this.node(r,{kind:y.h.ARGUMENT_COORDINATE,name:n,fieldName:e,argumentName:t}):this.node(r,{kind:y.h.MEMBER_COORDINATE,name:n,memberName:e}):this.node(r,{kind:y.h.TYPE_COORDINATE,name:n})}node(e,t){return!0!==this._options.noLocation&&(t.loc=new g.Ye(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){let t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw m(this._lexer.source,t.start,`Expected ${U(e)}, found ${L(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e&&(this.advanceLexer(),!0)}expectKeyword(e){let t=this._lexer.token;if(t.kind===s.NAME&&t.value===e)this.advanceLexer();else throw m(this._lexer.source,t.start,`Expected "${e}", found ${L(t)}.`)}expectOptionalKeyword(e){let t=this._lexer.token;return t.kind===s.NAME&&t.value===e&&(this.advanceLexer(),!0)}unexpected(e){let t=null!=e?e:this._lexer.token;return m(this._lexer.source,t.start,`Unexpected ${L(t)}.`)}any(e,t,r){this.expectToken(e);let i=[];for(;!this.expectOptionalToken(r);)i.push(t.call(this));return i}optionalMany(e,t,r){if(this.expectOptionalToken(e)){let e=[];do e.push(t.call(this));while(!this.expectOptionalToken(r));return e}return[]}many(e,t,r){this.expectToken(e);let i=[];do i.push(t.call(this));while(!this.expectOptionalToken(r));return i}delimitedMany(e,t){this.expectOptionalToken(e);let r=[];do r.push(t.call(this));while(this.expectOptionalToken(e));return r}advanceLexer(){let{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==s.EOF&&(++this._tokenCounter,void 0!==e&&this._tokenCounter>e))throw m(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function L(e){let t=e.value;return U(e.kind)+(null!=t?` "${t}"`:"")}function U(e){return e===s.BANG||e===s.DOLLAR||e===s.AMP||e===s.PAREN_L||e===s.PAREN_R||e===s.DOT||e===s.SPREAD||e===s.COLON||e===s.EQUALS||e===s.AT||e===s.BRACKET_L||e===s.BRACKET_R||e===s.BRACE_L||e===s.PIPE||e===s.BRACE_R?`"${e}"`:e}var M=new Map,F=new Map,$=!0,q=!1;function B(e){return e.replace(/[\s,]+/g," ").trim()}function K(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];"string"==typeof e&&(e=[e]);var i=e[0];return t.forEach(function(t,r){t&&"Document"===t.kind?i+=t.loc.source.body:i+=t,i+=e[r+1]}),function(e){var t=B(e);if(!M.has(t)){var r,i,s,n,o,a=function(e,t){let r=new I(e,t),i=r.parseDocument();return Object.defineProperty(i,"tokenCount",{enumerable:!1,value:r.tokenCount}),i}(e,{experimentalFragmentVariables:q,allowLegacyFragmentVariables:q});if(!a||"Document"!==a.kind)throw Error("Not a valid GraphQL document.");M.set(t,((n=new Set((r=new Set,i=[],a.definitions.forEach(function(e){if("FragmentDefinition"===e.kind){var t,s=e.name.value,n=B((t=e.loc).source.body.substring(t.start,t.end)),o=F.get(s);o&&!o.has(n)?$&&console.warn("Warning: fragment with name "+s+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):o||F.set(s,o=new Set),o.add(n),r.has(n)||(r.add(n),i.push(e))}else i.push(e)}),s=(0,l.__assign)((0,l.__assign)({},a),{definitions:i})).definitions)).forEach(function(e){e.loc&&delete e.loc,Object.keys(e).forEach(function(t){var r=e[t];r&&"object"==typeof r&&n.add(r)})}),(o=s.loc)&&(delete o.startToken,delete o.endToken),s))}return M.get(t)}(i)}var J={gql:K,resetCaches:function(){M.clear(),F.clear()},disableFragmentWarnings:function(){$=!1},enableExperimentalFragmentVariables:function(){q=!0},disableExperimentalFragmentVariables:function(){q=!1}};(function(e){e.gql=J.gql,e.resetCaches=J.resetCaches,e.disableFragmentWarnings=J.disableFragmentWarnings,e.enableExperimentalFragmentVariables=J.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=J.disableExperimentalFragmentVariables})(K||(K={})),K.default=K;var z=r(49817),G=r(66126),W=r.t(G,2),V=r(51047),H=!1,Q=W.useSyncExternalStore||function(e,t,r){var i=t();!1===globalThis.__DEV__||H||i===t()||(H=!0,!1!==globalThis.__DEV__&&z.kG.error(92));var s=G.useState({inst:{value:i,getSnapshot:t}}),n=s[0].inst,o=s[1];return V.JC?G.useLayoutEffect(function(){Object.assign(n,{value:i,getSnapshot:t}),Y(n)&&o({inst:n})},[e,i,t]):Object.assign(n,{value:i,getSnapshot:t}),G.useEffect(function(){return Y(n)&&o({inst:n}),e(function(){Y(n)&&o({inst:n})})},[e]),i};function Y(e){var t=e.value,r=e.getSnapshot;try{return t!==r()}catch(e){return!0}}var X=r(20208),Z=r(34837),ee=r(73427),et=r(17267),er=r(83537),ei=r(32015),es=r(86191),en=r(65910),eo=r(54761),ea=r(96786);function ec(e){var t;switch(e){case n.Query:t="Query";break;case n.Mutation:t="Mutation";break;case n.Subscription:t="Subscription"}return t}function el(e){(0,ea.Jp)("parser",function(){!1!==globalThis.__DEV__&&z.kG.warn(94)}),o||(o=new es.s(en.Q.parser||1e3));var t,r,i=o.get(e);if(i)return i;(0,z.kG)(!!e&&!!e.kind,95,e);for(var s=[],a=[],c=[],l=[],u=0,h=e.definitions;u<h.length;u++){var p=h[u];if("FragmentDefinition"===p.kind){s.push(p);continue}if("OperationDefinition"===p.kind)switch(p.operation){case"query":a.push(p);break;case"mutation":c.push(p);break;case"subscription":l.push(p)}}(0,z.kG)(!s.length||a.length||c.length||l.length,96),(0,z.kG)(a.length+c.length+l.length<=1,97,e,a.length,l.length,c.length),r=a.length?n.Query:n.Mutation,a.length||c.length||(r=n.Subscription);var d=a.length?a:c.length?c:l;(0,z.kG)(1===d.length,98,e,d.length);var f=d[0];t=f.variableDefinitions||[];var _={name:f.name&&"Name"===f.name.kind?f.name.value:"data",type:r,variables:t};return o.set(e,_),_}function eu(e){var t=G.useContext((0,ee.K)()),r=e||t.client;return(0,z.kG)(!!r,79),r}(function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"})(n||(n={})),el.resetCache=function(){o=void 0},!1!==globalThis.__DEV__&&(0,eo.zP)("parser",function(){return o?o.size:0});var eh=r(33463),ep=r(83757),ed=r(74943),ef=Symbol.for("apollo.hook.wrappers");function e_(e,t,r,i){void 0===i&&(i="Please remove this option.");var s=G.useRef(!1);t in e&&!s.current&&(!1!==globalThis.__DEV__&&z.kG.warn(78,r,t,i),s.current=!0)}var em=Object.prototype.hasOwnProperty;function eg(){}var ey=Symbol();function ew(e,t){!1!==globalThis.__DEV__&&(e_(t,"canonizeResults","useQuery"),e_(t,"partialRefetch","useQuery"),e_(t,"defaultOptions","useQuery","Pass the options directly to the hook instead."),e_(t,"onCompleted","useQuery","If your `onCompleted` callback sets local state, switch to use derived state using `data` returned from the hook instead. Use `useEffect` to perform side-effects as a result of updates to `data`."),e_(t,"onError","useQuery","If your `onError` callback sets local state, switch to use derived state using `data`, `error` or `errors` returned from the hook instead. Use `useEffect` if you need to perform side-effects as a result of updates to `data`, `error` or `errors`."));var r,i,s,o,a,c,u,h,p,d,f,_,m,g,y,w,v,b,x,k,E,T,A,S,N=(a=eu(t.client),u=!!(c=G.useContext((0,ee.K)()).renderPromises),h=a.disableNetworkFetches,p=!1!==t.ssr&&!t.skip,d=t.partialRefetch,void 0===(r=t)&&(r={}),i=r.skip,r.ssr,r.onCompleted,r.onError,s=r.defaultOptions,o=(0,l.__rest)(r,["skip","ssr","onCompleted","onError","defaultOptions"]),f=function(t){var r=Object.assign(o,{query:e});return u&&("network-only"===r.fetchPolicy||"cache-and-network"===r.fetchPolicy)&&(r.fetchPolicy="cache-first"),r.variables||(r.variables={}),i?(r.initialFetchPolicy=r.initialFetchPolicy||r.fetchPolicy||ek(s,a.defaultOptions),r.fetchPolicy="standby"):r.fetchPolicy||(r.fetchPolicy=(null==t?void 0:t.options.initialFetchPolicy)||ek(s,a.defaultOptions)),r},g=(m=(_=function(e,t,r,i,s){function o(o){var a,c,l,u,h;return a=n.Query,c=(0,ea.P6)("parser",el,[t]),l=ec(a),u=ec(c.type),(0,z.kG)(c.type===a,99,l,l,u),{client:e,query:t,observable:i&&i.getSSRObservable(s())||er.u.inactiveOnCreation.withValue(!i,function(){return(0,ea.P6)("canonizeResults",function(){return e.watchQuery(ev(void 0,e,r,s()))})}),resultData:{previousData:null===(h=null==o?void 0:o.resultData.current)||void 0===h?void 0:h.data}}}var a=G.useState(o),c=a[0],u=a[1];function h(e){Object.assign(c.observable,((t={})[ey]=e,t));var t,r,i=c.resultData;u((0,l.__assign)((0,l.__assign)({},c),{query:e.query,resultData:Object.assign(i,{previousData:(null===(r=i.current)||void 0===r?void 0:r.data)||i.previousData,current:void 0})}))}if(e!==c.client||t!==c.query){var p=o(c);return u(p),[p,h]}return[c,h]}(a,e,t,c,f))[0]).observable,y=m.resultData,w=_[1],v=f(g),g[ey]&&!(0,X.D)(g[ey],v)&&(g.reobserve(ev(g,a,t,v)),y.previousData=(null===(b=y.current)||void 0===b?void 0:b.data)||y.previousData,y.current=void 0),g[ey]=v,x=G.useMemo(function(){return{refetch:g.refetch.bind(g),reobserve:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!1!==globalThis.__DEV__&&!1!==globalThis.__DEV__&&z.kG.warn(84),g.reobserve.apply(g,e)},fetchMore:g.fetchMore.bind(g),updateQuery:g.updateQuery.bind(g),startPolling:g.startPolling.bind(g),stopPolling:g.stopPolling.bind(g),subscribeToMore:g.subscribeToMore.bind(g)}},[g]),c&&p&&(c.registerSSRObservable(g),g.getCurrentResult().loading&&c.addObservableQueryPromise(g)),{result:(k={onCompleted:t.onCompleted||eg,onError:t.onError||eg},E=G.useRef(k),G.useEffect(function(){E.current=k}),T=(u||h)&&!1===t.ssr&&!t.skip?eT:t.skip||"standby"===v.fetchPolicy?eA:void 0,A=y.previousData,S=G.useMemo(function(){return T&&eE(T,A,g,a)},[a,g,T,A]),Q(G.useCallback(function(e){if(u)return function(){};var t=function(){var t=y.current,r=g.getCurrentResult();t&&t.loading===r.loading&&t.networkStatus===r.networkStatus&&(0,X.D)(t.data,r.data)||eb(r,y,g,a,d,e,E.current)},r=function(s){if(i.current.unsubscribe(),i.current=g.resubscribeAfterError(t,r),!em.call(s,"graphQLErrors"))throw s;var n=y.current;(!n||n&&n.loading||!(0,X.D)(s,n.error))&&eb({data:n&&n.data,error:s,loading:!1,networkStatus:ei.Ie.error},y,g,a,d,e,E.current)},i={current:g.subscribe(t,r)};return function(){setTimeout(function(){return i.current.unsubscribe()})}},[h,u,g,y,d,a]),function(){return S||ex(y,g,E.current,d,a)},function(){return S||ex(y,g,E.current,d,a)})),obsQueryFields:x,observable:g,resultData:y,client:a,onQueryExecuted:w}),O=N.result,C=N.obsQueryFields;return G.useMemo(function(){return(0,l.__assign)((0,l.__assign)({},O),C)},[O,C])}function ev(e,t,r,i){var s=[],n=t.defaultOptions.watchQuery;return n&&s.push(n),r.defaultOptions&&s.push(r.defaultOptions),s.push((0,eh.o)(e&&e.options,i)),s.reduce(Z.J)}function eb(e,t,r,i,s,n,o){var a=t.current;a&&a.data&&(t.previousData=a.data),!e.error&&(0,ep.O)(e.errors)&&(e.error=new et.cA({graphQLErrors:e.errors})),t.current=eE(e.partial&&s&&!e.loading&&(!e.data||0===Object.keys(e.data).length)&&"cache-only"!==r.options.fetchPolicy?(r.refetch(),(0,l.__assign)((0,l.__assign)({},e),{loading:!0,networkStatus:ei.Ie.refetch})):e,t.previousData,r,i),n(),function(e,t,r){if(!e.loading){var i=(0,ep.O)(e.errors)?new et.cA({graphQLErrors:e.errors}):e.error;Promise.resolve().then(function(){i?r.onError(i):e.data&&t!==e.networkStatus&&e.networkStatus===ei.Ie.ready&&r.onCompleted(e.data)}).catch(function(e){!1!==globalThis.__DEV__&&z.kG.warn(e)})}}(e,null==a?void 0:a.networkStatus,o)}function ex(e,t,r,i,s){return e.current||eb(t.getCurrentResult(),e,t,s,i,function(){},r),e.current}function ek(e,t){var r;return(null==e?void 0:e.fetchPolicy)||(null===(r=null==t?void 0:t.watchQuery)||void 0===r?void 0:r.fetchPolicy)||"cache-first"}function eE(e,t,r,i){var s=e.data,n=(e.partial,(0,l.__rest)(e,["data","partial"]));return(0,l.__assign)((0,l.__assign)({data:s},n),{client:i,observable:r,variables:r.variables,called:e!==eT&&e!==eA,previousData:t})}var eT=(0,ed.J)({loading:!0,data:void 0,error:void 0,networkStatus:ei.Ie.loading}),eA=(0,ed.J)({loading:!1,data:void 0,error:void 0,networkStatus:ei.Ie.ready});!function(){var e=Error("Cannot find module '@/components/CoinChart'");throw e.code="MODULE_NOT_FOUND",e}();let eS=K`
  query GetCoinData($address: String!, $from: ISO8601DateTime!) {
    ethereum {
      dexTrades(
        options: { limit: 100, desc: "block.timestamp.time" }
        baseCurrency: { is: $address }
      ) {
        timeInterval {
          minute(count: 15)
        }
        quotePrice
      }
    }
  }
`;function eN({coinId:e}){var t,r,i,s;let{loading:n,error:o,data:l}=((s=(i=(r=eu((t={variables:{address:e,from:(0,c.useMemo)(()=>{let e=new Date;return e.setDate(e.getDate()-7),e.toISOString()},[])}}).client).queryManager)&&r[ef])&&i.useQuery)?s(ew):ew)(eS,t);if(n)return a.jsx("div",{children:"Loading..."});if(o)return(0,a.jsxs)("div",{children:["Error: ",o.message]});let u=l?.ethereum?.dexTrades?.map(e=>({time:e.timeInterval.minute,price:e.quotePrice}))||[];return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("div",{className:"mb-8",children:a.jsx("h1",{className:"text-3xl font-bold",children:"Coin Details"})}),a.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:a.jsx(Object(function(){var e=Error("Cannot find module '@/components/CoinChart'");throw e.code="MODULE_NOT_FOUND",e}()),{data:u})})]})}},51689:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var i=r(10326),s=r(18206),n=r(90434);let o={search:"\uD83D\uDD0D",notification:"\uD83D\uDD14",dashboard:"\uD83D\uDCCA",markets:"\uD83D\uDCC8",portfolio:"\uD83D\uDCBC",alerts:"\uD83D\uDD14"},a=({name:e,className:t=""})=>i.jsx("span",{className:t,children:o[e]});function c(){let{user:e,isLoading:t}=(0,s.aF)();return i.jsx("header",{className:"sticky top-0 z-10 bg-white shadow-sm lg:pl-64",children:(0,i.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)("div",{className:"flex flex-1 items-center",children:[i.jsx("div",{className:"lg:hidden",children:i.jsx(n.default,{href:"/",className:"flex items-center",children:i.jsx("span",{className:"text-xl font-bold text-indigo-600",children:"Cryptic"})})}),i.jsx("div",{className:"flex max-w-2xl items-center px-4",children:(0,i.jsxs)("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"search",className:"sr-only",children:"Search coins"}),(0,i.jsxs)("div",{className:"relative",children:[i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:i.jsx(a,{name:"search",className:"text-gray-400"})}),i.jsx("input",{type:"search",name:"search",id:"search",className:"block w-full rounded-md border-0 py-1.5 pl-10 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Search cryptocurrencies..."})]})]})})]}),i.jsx("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:t?i.jsx("div",{className:"h-8 w-8 animate-pulse rounded-full bg-gray-200"}):e?(0,i.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,i.jsxs)("div",{className:"hidden sm:flex sm:flex-col sm:items-end",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name}),i.jsx("span",{className:"text-xs text-gray-600",children:e.email})]}),i.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-indigo-600 font-medium text-white",children:e.name?.charAt(0)||"U"})]}):i.jsx(n.default,{href:"/api/auth/login",className:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2",children:"Login"})})]})})}},6660:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var i=r(10326),s=r(90434),n=r(35047),o=r(18206);let a=[{name:"Dashboard",href:"/",icon:"\uD83D\uDCCA"},{name:"Markets",href:"/markets",icon:"\uD83D\uDCC8"},{name:"Portfolio",href:"/portfolio",icon:"\uD83D\uDCBC"},{name:"Alerts",href:"/alerts",icon:"\uD83D\uDD14"}];function c(){let e=(0,n.usePathname)(),{user:t}=(0,o.aF)();return i.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,i.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[i.jsx("div",{className:"flex items-center h-16 flex-shrink-0 px-4 bg-indigo-600",children:i.jsx(s.default,{href:"/",className:"flex items-center space-x-2",children:i.jsx("span",{className:"text-2xl font-bold text-white",children:"Cryptic"})})}),(0,i.jsxs)("div",{className:"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto",children:[i.jsx("nav",{className:"mt-5 flex-1 px-2 space-y-1",children:a.map(t=>{let r=e===t.href;return(0,i.jsxs)(s.default,{href:t.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md ${r?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[i.jsx("span",{className:"mr-3",children:t.icon}),t.name]},t.name)})}),t&&i.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,i.jsxs)("div",{className:"flex items-center w-full",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("img",{className:"h-8 w-8 rounded-full",src:t.picture||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name||"User")}`,alt:t.name||"User"})}),(0,i.jsxs)("div",{className:"ml-3 w-full",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 truncate",children:t.name}),i.jsx(s.default,{href:"/api/auth/logout",className:"text-xs font-medium text-gray-500 hover:text-gray-700",children:"Logout"})]})]})})]})]})})}},58634:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>m});var i=r(10326),s=r(99592),n=r(17577);let o=async()=>{let e=await fetch("/api/crypto?endpoint=combined");if(!e.ok)throw Error("Failed to fetch data");let t=await e.json();if(t.error)throw Error(t.error);return t};(0,r(60114).Ue)(e=>({isAutoRefreshEnabled:!1,toggleAutoRefresh:()=>e(e=>({isAutoRefreshEnabled:!e.isAutoRefreshEnabled}))}));let a=(0,n.createContext)(null);function c({children:e}){let[t,r]=(0,n.useState)([]),[s,c]=(0,n.useState)(null),[l,u]=(0,n.useState)(!0),[h,p]=(0,n.useState)(null),d=(0,n.useCallback)(async()=>{try{u(!0);let e=await o();r(e.coins),c(e.global.data),p(null)}catch(e){p(e instanceof Error?e.message:"An error occurred")}finally{u(!1)}},[]);return i.jsx(a.Provider,{value:{coins:t,marketData:s,isLoading:l,error:h,refreshData:d},children:e})}var l=r(94179),u=r(58325),h=r(50126),p=r(39790);let d=(0,l.L)({uri:process.env.NEXT_PUBLIC_BITQUERY_URL}),f=(0,p.v)((e,{headers:t})=>({headers:{...t,"X-API-KEY":process.env.NEXT_PUBLIC_BITQUERY_KEY||""}})),_=new u.f({link:f.concat(d),cache:new h.h});function m({children:e}){return i.jsx(s.e,{client:_,children:i.jsx(c,{children:e})})}},7394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientGetter=t.NodeClient=void 0;let i=r(82174),s=r(62446),n=r(77838),o=r(11594),a=r(84770),c=r(39797),l=i.__importDefault(r(86711)),u=i.__importDefault(r(70952)),h=r(96501),p=(0,u.default)("client");function d(e){return e.split(" ").sort().join(" ")}class f extends s.AbstractClient{async getClient(){let e,t;if(this.client)return this.client;let{config:r,telemetry:{name:s,version:u}}=this,h=(e,t)=>Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign(Object.assign({},t.headers),{"User-Agent":`${s}/${u}`}),r.enableTelemetry?{"Auth0-Client":Buffer.from(JSON.stringify({name:s,version:u,env:{node:process.version}})).toString("base64")}:void 0),timeout:r.httpTimeout,agent:r.httpAgent}),f=e=>{e[n.custom.http_options]=h};f(n.Issuer);try{e=await n.Issuer.discover(r.issuerBaseURL)}catch(e){throw new o.DiscoveryError(e,r.issuerBaseURL)}f(e);let _=Array.isArray(e.id_token_signing_alg_values_supported)?e.id_token_signing_alg_values_supported:[];_.includes(r.idTokenSigningAlg)||p("ID token algorithm %o is not supported by the issuer. Supported ID token algorithms are: %o.",r.idTokenSigningAlg,_);let m=d(r.authorizationParams.response_type),g=Array.isArray(e.response_types_supported)?e.response_types_supported:[];g.map(d),g.includes(m)||p("Response type %o is not supported by the issuer. Supported response types are: %o.",m,g);let y=r.authorizationParams.response_mode,w=Array.isArray(e.response_modes_supported)?e.response_modes_supported:[];if(y&&!w.includes(y)&&p("Response mode %o is not supported by the issuer. Supported response modes are %o.",y,w),r.pushedAuthorizationRequests&&!e.pushed_authorization_request_endpoint)throw TypeError("pushed_authorization_request_endpoint must be configured on the issuer to use pushedAuthorizationRequests");if(r.clientAssertionSigningKey){let e=(0,a.createPrivateKey)({key:r.clientAssertionSigningKey});t={keys:[await (0,c.exportJWK)(e)]}}this.client=new e.Client({client_id:r.clientID,client_secret:r.clientSecret,id_token_signed_response_alg:r.idTokenSigningAlg,token_endpoint_auth_method:r.clientAuthMethod,token_endpoint_auth_signing_alg:r.clientAssertionSigningAlg},t),f(this.client),this.client[n.custom.clock_tolerance]=r.clockTolerance;let v=new URL(e.metadata.issuer);return r.idpLogout&&(this.config.idpLogout&&(this.config.auth0Logout||v.hostname.match("\\.auth0\\.com$")&&!1!==this.config.auth0Logout)?Object.defineProperty(this.client,"endSessionUrl",{value(t){let{post_logout_redirect_uri:s}=t,n=i.__rest(t,["post_logout_redirect_uri"]),o=new URL((0,l.default)(e.metadata.issuer,"/v2/logout"));return o.searchParams.set("client_id",r.clientID),s&&o.searchParams.set("returnTo",s),Object.entries(n).forEach(([e,t])=>{null!=t&&o.searchParams.set(e,t)}),o.toString()}}):e.end_session_endpoint||p("the issuer does not support RP-Initiated Logout")),this.client}async authorizationUrl(e){let t=await this.getClient();if(this.config.pushedAuthorizationRequests){let{request_uri:r}=await t.pushedAuthorizationRequest(e);e={request_uri:r}}return t.authorizationUrl(e)}async callbackParams(e){return new URLSearchParams((await this.getClient()).callbackParams({method:e.getMethod(),url:e.getUrl(),body:await e.getBody()}))}async callback(e,t,r,i){let s=Object.fromEntries(t.entries()),a=await this.getClient();try{return await a.callback(e,s,r,i)}catch(e){if(e instanceof n.errors.OPError)throw new o.IdentityProviderError(e);if(e instanceof n.errors.RPError)throw new o.ApplicationError(e);throw new o.EscapedError(e.message)}}async endSessionUrl(e){return(await this.getClient()).endSessionUrl(e)}async userinfo(e){let t=await this.getClient();try{return await t.userinfo(e)}catch(e){throw new o.UserInfoError(e.message)}}async refresh(e,t){let r=await this.getClient();try{return await r.refresh(e,t)}catch(e){throw new h.AccessTokenError(h.AccessTokenErrorCode.FAILED_REFRESH_GRANT,"The request to refresh the access token failed.",new o.IdentityProviderError(e))}}generateRandomCodeVerifier(){return n.generators.codeVerifier()}generateRandomNonce(){return n.generators.nonce()}calculateCodeChallenge(e){return n.generators.codeChallenge(e)}async getIssuerMetadata(){let{issuer:e}=await this.getClient();return e.metadata}}t.NodeClient=f,t.clientGetter=e=>{let t;return async r=>(t||(t=new f(r,e)),t)}},64099:(e,t,r)=>{"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.handleAuth=t.handleProfile=t.handleCallback=t.handleLogout=t.handleLogin=t.withPageAuthRequired=t.withApiAuthRequired=t.touchSession=t.getAccessToken=t.updateSession=t.getSession=t.initAuth0=void 0;let s=r(82174),n=s.__importDefault(r(84770)),o=r(89083),a=r(30662),c=r(7394),l=()=>n.default.randomBytes(16).toString("hex");function u(){return((0,a.setIsUsingNamedExports)(),i)?i:i=(0,o._initAuth)({genId:l,clientGetter:c.clientGetter})}t.initAuth0=e=>{(0,a.setIsUsingOwnInstance)();let t=(0,o._initAuth)({genId:l,params:e,clientGetter:c.clientGetter}),{withMiddlewareAuthRequired:r}=t;return s.__rest(t,["withMiddlewareAuthRequired"])},t.getSession=(...e)=>u().getSession(...e),t.updateSession=(...e)=>u().updateSession(...e),t.getAccessToken=(...e)=>u().getAccessToken(...e),t.touchSession=(...e)=>u().touchSession(...e),t.withApiAuthRequired=(...e)=>u().withApiAuthRequired(...e),t.withPageAuthRequired=(...e)=>u().withPageAuthRequired(...e),t.handleLogin=(...e)=>u().handleLogin(...e),t.handleLogout=(...e)=>u().handleLogout(...e),t.handleCallback=(...e)=>u().handleCallback(...e),t.handleProfile=(...e)=>u().handleProfile(...e),t.handleAuth=(...e)=>u().handleAuth(...e),s.__exportStar(r(20076),t)},75871:(e,t,r)=>{"use strict";var i=r(84770);function s(e,t){return t=a(e,t),function(e,t){if(void 0===(r="passthrough"!==t.algorithm?i.createHash(t.algorithm):new u).write&&(r.write=r.update,r.end=r.update),l(t,r).dispatch(e),r.update||r.end(""),r.digest)return r.digest("buffer"===t.encoding?void 0:t.encoding);var r,s=r.read();return"buffer"===t.encoding?s:s.toString(t.encoding)}(e,t)}(t=e.exports=s).sha1=function(e){return s(e)},t.keys=function(e){return s(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},t.MD5=function(e){return s(e,{algorithm:"md5",encoding:"hex"})},t.keysMD5=function(e){return s(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var n=i.getHashes?i.getHashes().slice():["sha1","md5"];n.push("passthrough");var o=["buffer","hex","binary","base64"];function a(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=!0===t.ignoreUnknown,r.respectType=!1!==t.respectType,r.respectFunctionNames=!1!==t.respectFunctionNames,r.respectFunctionProperties=!1!==t.respectFunctionProperties,r.unorderedArrays=!0===t.unorderedArrays,r.unorderedSets=!1!==t.unorderedSets,r.unorderedObjects=!1!==t.unorderedObjects,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,void 0===e)throw Error("Object argument required.");for(var i=0;i<n.length;++i)n[i].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=n[i]);if(-1===n.indexOf(r.algorithm))throw Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+n.join(", "));if(-1===o.indexOf(r.encoding)&&"passthrough"!==r.algorithm)throw Error('Encoding "'+r.encoding+'"  not supported. supported values: '+o.join(", "));return r}function c(e){return"function"==typeof e&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function l(e,t,r){r=r||[];var i=function(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")};return{dispatch:function(t){e.replacer&&(t=e.replacer(t));var r=typeof t;return null===t&&(r="null"),this["_"+r](t)},_object:function(t){var s=Object.prototype.toString.call(t),n=/\[object (.*)\]/i.exec(s);n=(n=n?n[1]:"unknown:["+s+"]").toLowerCase();var o=null;if((o=r.indexOf(t))>=0)return this.dispatch("[CIRCULAR:"+o+"]");if(r.push(t),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t))return i("buffer:"),i(t);if("object"!==n&&"function"!==n&&"asyncfunction"!==n){if(this["_"+n])this["_"+n](t);else if(e.ignoreUnknown)return i("["+n+"]");else throw Error('Unknown object type "'+n+'"')}else{var a=Object.keys(t);e.unorderedObjects&&(a=a.sort()),!1===e.respectType||c(t)||a.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(a=a.filter(function(t){return!e.excludeKeys(t)})),i("object:"+a.length+":");var l=this;return a.forEach(function(r){l.dispatch(r),i(":"),e.excludeValues||l.dispatch(t[r]),i(",")})}},_array:function(t,s){s=void 0!==s?s:!1!==e.unorderedArrays;var n=this;if(i("array:"+t.length+":"),!s||t.length<=1)return t.forEach(function(e){return n.dispatch(e)});var o=[],a=t.map(function(t){var i=new u,s=r.slice();return l(e,i,s).dispatch(t),o=o.concat(s.slice(r.length)),i.read().toString()});return r=r.concat(o),a.sort(),this._array(a,!1)},_date:function(e){return i("date:"+e.toJSON())},_symbol:function(e){return i("symbol:"+e.toString())},_error:function(e){return i("error:"+e.toString())},_boolean:function(e){return i("bool:"+e.toString())},_string:function(e){i("string:"+e.length+":"),i(e.toString())},_function:function(t){i("fn:"),c(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return i("number:"+e.toString())},_xml:function(e){return i("xml:"+e.toString())},_null:function(){return i("Null")},_undefined:function(){return i("Undefined")},_regexp:function(e){return i("regex:"+e.toString())},_uint8array:function(e){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return i("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return i("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return i("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return i("url:"+e.toString(),"utf8")},_map:function(t){i("map:");var r=Array.from(t);return this._array(r,!1!==e.unorderedSets)},_set:function(t){i("set:");var r=Array.from(t);return this._array(r,!1!==e.unorderedSets)},_file:function(e){return i("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return i("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return i("domwindow")},_bigint:function(e){return i("bigint:"+e.toString())},_process:function(){return i("process")},_timer:function(){return i("timer")},_pipe:function(){return i("pipe")},_tcp:function(){return i("tcp")},_udp:function(){return i("udp")},_tty:function(){return i("tty")},_statwatcher:function(){return i("statwatcher")},_securecontext:function(){return i("securecontext")},_connection:function(){return i("connection")},_zlib:function(){return i("zlib")},_context:function(){return i("context")},_nodescript:function(){return i("nodescript")},_httpparser:function(){return i("httpparser")},_dataview:function(){return i("dataview")},_signal:function(){return i("signal")},_fsevent:function(){return i("fsevent")},_tlswrap:function(){return i("tlswrap")}}}function u(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}t.writeToStream=function(e,t,r){return void 0===r&&(r=t,t={}),l(t=a(e,t),r).dispatch(e)}},87302:(e,t,r)=>{let i;let{strict:s}=r(27790),{createHash:n}=r(84770),{format:o}=r(21764);if(Buffer.isEncoding("base64url"))i=e=>e.toString("base64url");else{let e=e=>e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");i=t=>e(t.toString("base64"))}function a(e,t,r){let s=(function(e,t){switch(e){case"HS256":case"RS256":case"PS256":case"ES256":case"ES256K":return n("sha256");case"HS384":case"RS384":case"PS384":case"ES384":return n("sha384");case"HS512":case"RS512":case"PS512":case"ES512":case"Ed25519":return n("sha512");case"Ed448":return n("shake256",{outputLength:114});case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return n("shake256",{outputLength:64});case"EdDSA":switch(t){case"Ed25519":return n("sha512");case"Ed448":return n("shake256",{outputLength:114});default:throw TypeError("unrecognized or invalid EdDSA curve provided")}default:throw TypeError("unrecognized or invalid JWS algorithm provided")}})(t,r).update(e).digest();return i(s.slice(0,s.length/2))}e.exports={validate:function(e,t,r,i,n){let c,l;if("string"!=typeof e.claim||!e.claim)throw TypeError("names.claim must be a non-empty string");if("string"!=typeof e.source||!e.source)throw TypeError("names.source must be a non-empty string");s("string"==typeof t&&t,`${e.claim} must be a non-empty string`),s("string"==typeof r&&r,`${e.source} must be a non-empty string`);try{c=a(r,i,n)}catch(t){l=o("%s could not be validated (%s)",e.claim,t.message)}l=l||o("%s mismatch, expected %s, got: %s",e.claim,c,t),s.equal(c,t,l)},generate:a}},80137:(e,t,r)=>{"use strict";let i;let{inspect:s}=r(21764),n=r(32615),o=r(84770),{strict:a}=r(27790),c=r(86624),l=r(17360),{URL:u,URLSearchParams:h}=r(17360),p=r(39797),d=r(87302),f=r(74655),_=r(45820),m=r(69080),g=r(69054),y=r(15070),{assertSigningAlgValuesSupport:w,assertIssuerConfiguration:v}=r(914),b=r(58945),x=r(8140),k=r(83818),E=r(80536),{OPError:T,RPError:A}=r(80994),S=r(46438),{random:N}=r(47389),O=r(82472),{CLOCK_TOLERANCE:C}=r(77731),{keystores:D}=r(25602),P=r(56310),j=r(52936),{authenticatedPost:R,resolveResponseType:I,resolveRedirectUri:L}=r(36223),{queryKeyStore:U}=r(92792),M=r(16670),[F,$]=process.version.slice(1).split(".").map(e=>parseInt(e,10)),q=F>=17||16===F&&$>=9,B=Symbol(),K=Symbol(),J=Symbol();function z(e){return b(e,"access_token","code","error_description","error_uri","error","expires_in","id_token","iss","response","session_state","state","token_type")}function G(e,t="Bearer"){return`${t} ${e}`}function W(e){let t=l.parse(e);return t.search?c.parse(t.search.substring(1)):{}}function V(e,t,r){if(void 0===e[r])throw new A({message:`missing required JWT property ${r}`,jwt:t})}function H(e){let t={client_id:this.client_id,scope:"openid",response_type:I.call(this),redirect_uri:L.call(this),...e};return Object.entries(t).forEach(([e,r])=>{null==r?delete t[e]:"claims"===e&&"object"==typeof r?t[e]=JSON.stringify(r):"resource"===e&&Array.isArray(r)?t[e]=r:"string"!=typeof r&&(t[e]=String(r))}),t}function Q(e){if(!x(e)||!Array.isArray(e.keys)||e.keys.some(e=>!x(e)||!("kty"in e)))throw TypeError("jwks must be a JSON Web Key Set formatted object");return P.fromJWKS(e,{onlyPrivate:!0})}class Y{#e;#t;#r;#i;constructor(e,t,r={},i,s){if(this.#e=new Map,this.#t=e,this.#r=t,"string"!=typeof r.client_id||!r.client_id)throw TypeError("client_id is required");let n={grant_types:["authorization_code"],id_token_signed_response_alg:"RS256",authorization_signed_response_alg:"RS256",response_types:["code"],token_endpoint_auth_method:"client_secret_basic",...this.fapi1()?{grant_types:["authorization_code","implicit"],id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",response_types:["code id_token"],tls_client_certificate_bound_access_tokens:!0,token_endpoint_auth_method:void 0}:void 0,...this.fapi2()?{id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",token_endpoint_auth_method:void 0}:void 0,...r};if(this.fapi())switch(n.token_endpoint_auth_method){case"self_signed_tls_client_auth":case"tls_client_auth":break;case"private_key_jwt":if(!i)throw TypeError("jwks is required");break;case void 0:throw TypeError("token_endpoint_auth_method is required");default:throw TypeError("invalid or unsupported token_endpoint_auth_method")}if(this.fapi2()&&(n.tls_client_certificate_bound_access_tokens&&n.dpop_bound_access_tokens||!n.tls_client_certificate_bound_access_tokens&&!n.dpop_bound_access_tokens))throw TypeError("either tls_client_certificate_bound_access_tokens or dpop_bound_access_tokens must be set to true");if(function(e,t,r){if(t.token_endpoint_auth_method||function(e,t){try{let r=e.issuer.token_endpoint_auth_methods_supported;!r.includes(t.token_endpoint_auth_method)&&r.includes("client_secret_post")&&(t.token_endpoint_auth_method="client_secret_post")}catch(e){}}(e,r),t.redirect_uri){if(t.redirect_uris)throw TypeError("provide a redirect_uri or redirect_uris, not both");r.redirect_uris=[t.redirect_uri],delete r.redirect_uri}if(t.response_type){if(t.response_types)throw TypeError("provide a response_type or response_types, not both");r.response_types=[t.response_type],delete r.response_type}}(this,r,n),w("token",this.issuer,n),["introspection","revocation"].forEach(e=>{(function(e,t,r){if(!t[`${e}_endpoint`])return;let i=r.token_endpoint_auth_method,s=r.token_endpoint_auth_signing_alg,n=`${e}_endpoint_auth_method`,o=`${e}_endpoint_auth_signing_alg`;void 0===r[n]&&void 0===r[o]&&(void 0!==i&&(r[n]=i),void 0!==s&&(r[o]=s))})(e,this.issuer,n),w(e,this.issuer,n)}),Object.entries(n).forEach(([e,t])=>{this.#e.set(e,t),this[e]||Object.defineProperty(this,e,{get(){return this.#e.get(e)},enumerable:!0})}),void 0!==i){let e=Q.call(this,i);D.set(this,e)}null!=s&&s.additionalAuthorizedParties&&(this.#i=j(s.additionalAuthorizedParties)),this[C]=0}authorizationUrl(e={}){if(!x(e))throw TypeError("params must be a plain object");v(this.issuer,"authorization_endpoint");let t=new u(this.issuer.authorization_endpoint);for(let[r,i]of Object.entries(H.call(this,e)))if(Array.isArray(i))for(let e of(t.searchParams.delete(r),i))t.searchParams.append(r,e);else t.searchParams.set(r,i);return t.href.replace(/\+/g,"%20")}authorizationPost(e={}){if(!x(e))throw TypeError("params must be a plain object");let t=H.call(this,e),r=Object.keys(t).map(e=>`<input type="hidden" name="${e}" value="${t[e]}"/>`).join("\n");return`<!DOCTYPE html>
<head>
<title>Requesting Authorization</title>
</head>
<body onload="javascript:document.forms[0].submit()">
<form method="post" action="${this.issuer.authorization_endpoint}">
  ${r}
</form>
</body>
</html>`}endSessionUrl(e={}){let t;v(this.issuer,"end_session_endpoint");let{0:r,length:i}=this.post_logout_redirect_uris||[],{post_logout_redirect_uri:s=1===i?r:void 0}=e;if({id_token_hint:t,...e}=e,t instanceof E){if(!t.id_token)throw TypeError("id_token not present in TokenSet");t=t.id_token}let n=l.parse(this.issuer.end_session_endpoint),o=g(W(this.issuer.end_session_endpoint),e,{post_logout_redirect_uri:s,client_id:this.client_id},{id_token_hint:t});return Object.entries(o).forEach(([e,t])=>{null==t&&delete o[e]}),n.search=null,n.query=o,l.format(n)}callbackParams(e){let t=e instanceof n.IncomingMessage||e&&e.method&&e.url;if("string"!=typeof e&&!t)throw TypeError("#callbackParams only accepts string urls, http.IncomingMessage or a lookalike");if(!t)return z(W(e));switch(e.method){case"GET":return z(W(e.url));case"POST":if(void 0===e.body)throw TypeError("incoming message body missing, include a body parser prior to this method call");switch(typeof e.body){case"object":case"string":if(Buffer.isBuffer(e.body))return z(c.parse(e.body.toString("utf-8")));if("string"==typeof e.body)return z(c.parse(e.body));return z(e.body);default:throw TypeError("invalid IncomingMessage body object")}default:throw TypeError("invalid IncomingMessage method")}}async callback(e,t,r={},{exchangeBody:i,clientAssertionPayload:s,DPoP:n}={}){let o=z(t);if(!r.jarm||"response"in t){if("response"in t){let e=await this.decryptJARM(o.response);o=await this.validateJARM(e)}}else throw new A({message:"expected a JARM response",checks:r,params:o});if(this.default_max_age&&!r.max_age&&(r.max_age=this.default_max_age),o.state&&!r.state)throw TypeError("checks.state argument is missing");if(!o.state&&r.state)throw new A({message:"state missing from the response",checks:r,params:o});if(r.state!==o.state)throw new A({printf:["state mismatch, expected %s, got: %s",r.state,o.state],checks:r,params:o});if("iss"in o){if(v(this.issuer,"issuer"),o.iss!==this.issuer.issuer)throw new A({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,o.iss],params:o})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in o)&&!("response"in t))throw new A({message:"iss missing from the response",params:o});if(o.error)throw new T(o);let a={code:["code"],id_token:["id_token"],token:["access_token","token_type"]};if(r.response_type){for(let e of r.response_type.split(" "))if("none"===e){if(o.code||o.id_token||o.access_token)throw new A({message:'unexpected params encountered for "none" response',checks:r,params:o})}else for(let t of a[e])if(!o[t])throw new A({message:`${t} missing from response`,checks:r,params:o})}if(o.id_token){let e=new E(o);if(await this.decryptIdToken(e),await this.validateIdToken(e,r.nonce,"authorization",r.max_age,r.state),!o.code)return e}if(o.code){let t=await this.grant({...i,grant_type:"authorization_code",code:o.code,redirect_uri:e,code_verifier:r.code_verifier},{clientAssertionPayload:s,DPoP:n});return await this.decryptIdToken(t),await this.validateIdToken(t,r.nonce,"token",r.max_age),o.session_state&&(t.session_state=o.session_state),t}return new E(o)}async oauthCallback(e,t,r={},{exchangeBody:i,clientAssertionPayload:s,DPoP:n}={}){let o=z(t);if(!r.jarm||"response"in t){if("response"in t){let e=await this.decryptJARM(o.response);o=await this.validateJARM(e)}}else throw new A({message:"expected a JARM response",checks:r,params:o});if(o.state&&!r.state)throw TypeError("checks.state argument is missing");if(!o.state&&r.state)throw new A({message:"state missing from the response",checks:r,params:o});if(r.state!==o.state)throw new A({printf:["state mismatch, expected %s, got: %s",r.state,o.state],checks:r,params:o});if("iss"in o){if(v(this.issuer,"issuer"),o.iss!==this.issuer.issuer)throw new A({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,o.iss],params:o})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in o)&&!("response"in t))throw new A({message:"iss missing from the response",params:o});if(o.error)throw new T(o);if("string"==typeof o.id_token&&o.id_token.length)throw new A({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:o});delete o.id_token;let a={code:["code"],token:["access_token","token_type"]};if(r.response_type)for(let e of r.response_type.split(" ")){if("none"===e&&(o.code||o.id_token||o.access_token))throw new A({message:'unexpected params encountered for "none" response',checks:r,params:o});if(a[e]){for(let t of a[e])if(!o[t])throw new A({message:`${t} missing from response`,checks:r,params:o})}}if(o.code){let t=await this.grant({...i,grant_type:"authorization_code",code:o.code,redirect_uri:e,code_verifier:r.code_verifier},{clientAssertionPayload:s,DPoP:n});if("string"==typeof t.id_token&&t.id_token.length)throw new A({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:o});return delete t.id_token,t}return new E(o)}async decryptIdToken(e){if(!this.id_token_encrypted_response_alg)return e;let t=e;if(t instanceof E){if(!t.id_token)throw TypeError("id_token not present in TokenSet");t=t.id_token}let r=this.id_token_encrypted_response_alg,i=this.id_token_encrypted_response_enc,s=await this.decryptJWE(t,r,i);return e instanceof E?(e.id_token=s,e):s}async validateJWTUserinfo(e){let t=this.userinfo_signed_response_alg;return this.validateJWT(e,t,[])}async decryptJARM(e){if(!this.authorization_encrypted_response_alg)return e;let t=this.authorization_encrypted_response_alg,r=this.authorization_encrypted_response_enc;return this.decryptJWE(e,t,r)}async decryptJWTUserinfo(e){if(!this.userinfo_encrypted_response_alg)return e;let t=this.userinfo_encrypted_response_alg,r=this.userinfo_encrypted_response_enc;return this.decryptJWE(e,t,r)}async decryptJWE(e,t,r="A128CBC-HS256"){let i;let s=JSON.parse(m.decode(e.split(".")[0]));if(s.alg!==t)throw new A({printf:["unexpected JWE alg received, expected %s, got: %s",t,s.alg],jwt:e});if(s.enc!==r)throw new A({printf:["unexpected JWE enc received, expected %s, got: %s",r,s.enc],jwt:e});let n=e=>new TextDecoder().decode(e.plaintext);if(t.match(/^(?:RSA|ECDH)/)){let t=await D.get(this),r=p.decodeProtectedHeader(e);for(let s of t.all({...r,use:"enc"}))if(i=await p.compactDecrypt(e,await s.keyObject(r.alg)).then(n,()=>{}))break}else i=await p.compactDecrypt(e,this.secretForAlg("dir"===t?r:t)).then(n,()=>{});if(!i)throw new A({message:"failed to decrypt JWE",jwt:e});return i}async validateIdToken(e,t,r,i,s){let n=e,o=this.id_token_signed_response_alg;if(n instanceof E){if(!n.id_token)throw TypeError("id_token not present in TokenSet");n=n.id_token}n=String(n);let a=S(),{protected:c,payload:l,key:u}=await this.validateJWT(n,o);if("number"==typeof i||i!==J&&this.require_auth_time){if(!l.auth_time)throw new A({message:"missing required JWT property auth_time",jwt:n});if("number"!=typeof l.auth_time)throw new A({message:"JWT auth_time claim must be a JSON numeric value",jwt:n})}if("number"==typeof i&&l.auth_time+i<a-this[C])throw new A({printf:["too much time has elapsed since the last End-User authentication, max_age %i, auth_time: %i, now %i",i,l.auth_time,a-this[C]],now:a,tolerance:this[C],auth_time:l.auth_time,jwt:n});if(t!==K&&(l.nonce||void 0!==t)&&l.nonce!==t)throw new A({printf:["nonce mismatch, expected %s, got: %s",t,l.nonce],jwt:n});if("authorization"===r){if(!l.at_hash&&e.access_token)throw new A({message:"missing required property at_hash",jwt:n});if(!l.c_hash&&e.code)throw new A({message:"missing required property c_hash",jwt:n});if(this.fapi1()&&!l.s_hash&&(e.state||s))throw new A({message:"missing required property s_hash",jwt:n});if(l.s_hash){if(!s)throw TypeError('cannot verify s_hash, "checks.state" property not provided');try{d.validate({claim:"s_hash",source:"state"},l.s_hash,s,c.alg,u.jwk&&u.jwk.crv)}catch(e){throw new A({message:e.message,jwt:n})}}}if(this.fapi()&&l.iat<a-3600)throw new A({printf:["JWT issued too far in the past, now %i, iat %i",a,l.iat],now:a,tolerance:this[C],iat:l.iat,jwt:n});if(e.access_token&&void 0!==l.at_hash)try{d.validate({claim:"at_hash",source:"access_token"},l.at_hash,e.access_token,c.alg,u.jwk&&u.jwk.crv)}catch(e){throw new A({message:e.message,jwt:n})}if(e.code&&void 0!==l.c_hash)try{d.validate({claim:"c_hash",source:"code"},l.c_hash,e.code,c.alg,u.jwk&&u.jwk.crv)}catch(e){throw new A({message:e.message,jwt:n})}return e}async validateJWT(e,t,r=["iss","sub","aud","exp","iat"]){let i,s,n;let o="https://self-issued.me"===this.issuer.issuer,c=S();try{({header:i,payload:s}=_(e,{complete:!0}))}catch(t){throw new A({printf:["failed to decode JWT (%s: %s)",t.name,t.message],jwt:e})}if(i.alg!==t)throw new A({printf:["unexpected JWT alg received, expected %s, got: %s",t,i.alg],jwt:e});if(o&&(r=[...r,"sub_jwk"]),r.forEach(V.bind(void 0,s,e)),void 0!==s.iss){let t=this.issuer.issuer;if(this.#r&&(t=this.issuer.issuer.replace("{tenantid}",s.tid)),s.iss!==t)throw new A({printf:["unexpected iss value, expected %s, got: %s",t,s.iss],jwt:e})}if(void 0!==s.iat&&"number"!=typeof s.iat)throw new A({message:"JWT iat claim must be a JSON numeric value",jwt:e});if(void 0!==s.nbf){if("number"!=typeof s.nbf)throw new A({message:"JWT nbf claim must be a JSON numeric value",jwt:e});if(s.nbf>c+this[C])throw new A({printf:["JWT not active yet, now %i, nbf %i",c+this[C],s.nbf],now:c,tolerance:this[C],nbf:s.nbf,jwt:e})}if(void 0!==s.exp){if("number"!=typeof s.exp)throw new A({message:"JWT exp claim must be a JSON numeric value",jwt:e});if(c-this[C]>=s.exp)throw new A({printf:["JWT expired, now %i, exp %i",c-this[C],s.exp],now:c,tolerance:this[C],exp:s.exp,jwt:e})}if(void 0!==s.aud){if(Array.isArray(s.aud)){if(s.aud.length>1&&!s.azp)throw new A({message:"missing required JWT property azp",jwt:e});if(!s.aud.includes(this.client_id))throw new A({printf:["aud is missing the client_id, expected %s to be included in %j",this.client_id,s.aud],jwt:e})}else if(s.aud!==this.client_id)throw new A({printf:["aud mismatch, expected %s, got: %s",this.client_id,s.aud],jwt:e})}if(void 0!==s.azp){let t=this.#i;if(!(t="string"==typeof t?[this.client_id,t]:Array.isArray(t)?[this.client_id,...t]:[this.client_id]).includes(s.azp))throw new A({printf:["azp mismatch, got: %s",s.azp],jwt:e})}if(o){try{a(x(s.sub_jwk));let e=await p.importJWK(s.sub_jwk,i.alg);a.equal(e.type,"public"),n=[{keyObject:()=>e}]}catch(t){throw new A({message:"failed to use sub_jwk claim as an asymmetric JSON Web Key",jwt:e})}if(await p.calculateJwkThumbprint(s.sub_jwk)!==s.sub)throw new A({message:"failed to match the subject with sub_jwk",jwt:e})}else i.alg.startsWith("HS")?n=[this.secretForAlg(i.alg)]:"none"!==i.alg&&(n=await U.call(this.issuer,{...i,use:"sig"}));if(!n&&"none"===i.alg)return{protected:i,payload:s};for(let t of n){let r=await p.compactVerify(e,t instanceof Uint8Array?t:await t.keyObject(i.alg)).catch(()=>{});if(r)return{payload:s,protected:r.protectedHeader,key:t}}throw new A({message:"failed to validate JWT signature",jwt:e})}async refresh(e,{exchangeBody:t,clientAssertionPayload:r,DPoP:i}={}){let s=e;if(s instanceof E){if(!s.refresh_token)throw TypeError("refresh_token not present in TokenSet");s=s.refresh_token}let n=await this.grant({...t,grant_type:"refresh_token",refresh_token:String(s)},{clientAssertionPayload:r,DPoP:i});if(n.id_token&&(await this.decryptIdToken(n),await this.validateIdToken(n,K,"token",J),e instanceof E&&e.id_token)){let t=e.claims().sub,r=n.claims().sub;if(r!==t)throw new A({printf:["sub mismatch, expected %s, got: %s",t,r],jwt:n.id_token})}return n}async requestResource(e,t,{method:r,headers:i,body:s,DPoP:n,tokenType:o=n?"DPoP":t instanceof E?t.token_type:"Bearer"}={},a){if(t instanceof E){if(!t.access_token)throw TypeError("access_token not present in TokenSet");t=t.access_token}if(t){if("string"!=typeof t)throw TypeError("invalid access token provided")}else throw TypeError("no access token provided");let c={headers:{Authorization:G(t,o),...i},body:s},l=!!this.tls_client_certificate_bound_access_tokens,u=await O.call(this,{...c,responseType:"buffer",method:r,url:e},{accessToken:t,mTLS:l,DPoP:n}),h=u.headers["www-authenticate"];return a!==B&&h&&h.toLowerCase().startsWith("dpop ")&&"use_dpop_nonce"===y(h).error?this.requestResource(e,t,{method:r,headers:i,body:s,DPoP:n,tokenType:o}):u}async userinfo(e,{method:t="GET",via:r="header",tokenType:i,params:s,DPoP:n}={}){let o;v(this.issuer,"userinfo_endpoint");let c={tokenType:i,method:String(t).toUpperCase(),DPoP:n};if("GET"!==c.method&&"POST"!==c.method)throw TypeError("#userinfo() method can only be POST or a GET");if("body"===r&&"POST"!==c.method)throw TypeError("can only send body on POST");let l=!!(this.userinfo_signed_response_alg||this.userinfo_encrypted_response_alg);l?c.headers={Accept:"application/jwt"}:c.headers={Accept:"application/json"},this.tls_client_certificate_bound_access_tokens&&this.issuer.mtls_endpoint_aliases&&(o=this.issuer.mtls_endpoint_aliases.userinfo_endpoint),o=new u(o||this.issuer.userinfo_endpoint),"body"===r&&(c.headers.Authorization=void 0,c.headers["Content-Type"]="application/x-www-form-urlencoded",c.body=new h,c.body.append("access_token",e instanceof E?e.access_token:e)),s&&("GET"===c.method?Object.entries(s).forEach(([e,t])=>{o.searchParams.append(e,t)}):c.body?Object.entries(s).forEach(([e,t])=>{c.body.append(e,t)}):(c.body=new h,c.headers["Content-Type"]="application/x-www-form-urlencoded",Object.entries(s).forEach(([e,t])=>{c.body.append(e,t)}))),c.body&&(c.body=c.body.toString());let p=await this.requestResource(o,e,c),d=k(p,{bearer:!0});if(l){if(!/^application\/jwt/.test(p.headers["content-type"]))throw new A({message:"expected application/jwt response from the userinfo_endpoint",response:p});let e=p.body.toString(),t=await this.decryptJWTUserinfo(e);if(this.userinfo_signed_response_alg)({payload:d}=await this.validateJWTUserinfo(t));else try{d=JSON.parse(t),a(x(d))}catch(e){throw new A({message:"failed to parse userinfo JWE payload as JSON",jwt:t})}}else try{d=JSON.parse(p.body)}catch(e){throw Object.defineProperty(e,"response",{value:p}),e}if(e instanceof E&&e.id_token){let t=e.claims().sub;if(d.sub!==t)throw new A({printf:["userinfo sub mismatch, expected %s, got: %s",t,d.sub],body:d,jwt:e.id_token})}return d}encryptionSecret(e){let t=e<=256?"sha256":e<=384?"sha384":e<=512&&"sha512";if(!t)throw Error("unsupported symmetric encryption key derivation");return o.createHash(t).update(this.client_secret).digest().slice(0,e/8)}secretForAlg(e){if(!this.client_secret)throw TypeError("client_secret is required");return/^A(\d{3})(?:GCM)?KW$/.test(e)?this.encryptionSecret(parseInt(RegExp.$1,10)):/^A(\d{3})(?:GCM|CBC-HS(\d{3}))$/.test(e)?this.encryptionSecret(parseInt(RegExp.$2||RegExp.$1,10)):new TextEncoder().encode(this.client_secret)}async grant(e,{clientAssertionPayload:t,DPoP:r}={},i){let s;v(this.issuer,"token_endpoint");let n=await R.call(this,"token",{form:e,responseType:"json"},{clientAssertionPayload:t,DPoP:r});try{s=k(n)}catch(s){if(i!==B&&s instanceof T&&"use_dpop_nonce"===s.error)return this.grant(e,{clientAssertionPayload:t,DPoP:r},B);throw s}return new E(s)}async deviceAuthorization(e={},{exchangeBody:t,clientAssertionPayload:r,DPoP:i}={}){v(this.issuer,"device_authorization_endpoint"),v(this.issuer,"token_endpoint");let s=H.call(this,{client_id:this.client_id,redirect_uri:null,response_type:null,...e}),n=k(await R.call(this,"device_authorization",{responseType:"json",form:s},{clientAssertionPayload:r,endpointAuthMethod:"token"}));return new M({client:this,exchangeBody:t,clientAssertionPayload:r,response:n,maxAge:e.max_age,DPoP:i})}async revoke(e,t,{revokeBody:r,clientAssertionPayload:i}={}){if(v(this.issuer,"revocation_endpoint"),void 0!==t&&"string"!=typeof t)throw TypeError("hint must be a string");let s={...r,token:e};t&&(s.token_type_hint=t),k(await R.call(this,"revocation",{form:s},{clientAssertionPayload:i}),{body:!1})}async introspect(e,t,{introspectBody:r,clientAssertionPayload:i}={}){if(v(this.issuer,"introspection_endpoint"),void 0!==t&&"string"!=typeof t)throw TypeError("hint must be a string");let s={...r,token:e};return t&&(s.token_type_hint=t),k(await R.call(this,"introspection",{form:s,responseType:"json"},{clientAssertionPayload:i}))}static async register(e,t={}){let{initialAccessToken:r,jwks:i,...s}=t;if(v(this.issuer,"registration_endpoint"),void 0!==i&&!(e.jwks||e.jwks_uri)){let t=await Q.call(this,i);e.jwks=t.toJWKS()}return new this(k(await O.call(this,{headers:{Accept:"application/json",...r?{Authorization:G(r)}:void 0},responseType:"json",json:e,url:this.issuer.registration_endpoint,method:"POST"}),{statusCode:201,bearer:!0}),i,s)}get metadata(){return j(Object.fromEntries(this.#e.entries()))}static async fromUri(e,t,r,i){return new this(k(await O.call(this,{method:"GET",url:e,responseType:"json",headers:{Authorization:G(t),Accept:"application/json"}}),{bearer:!0}),r,i)}async requestObject(e={},{sign:t=this.request_object_signing_alg||"none",encrypt:{alg:r=this.request_object_encryption_alg,enc:i=this.request_object_encryption_enc||"A128CBC-HS256"}={}}={}){let s,n;if(!x(e))throw TypeError("requestObject must be a plain object");let o=S(),a={alg:t,typ:"oauth-authz-req+jwt"},c=JSON.stringify(g({},e,{iss:this.client_id,aud:this.issuer.issuer,client_id:this.client_id,jti:N(),iat:o,exp:o+300,...this.fapi()?{nbf:o}:void 0}));if("none"===t)s=[m.encode(JSON.stringify(a)),m.encode(c),""].join(".");else{let e=t.startsWith("HS");if(e)n=this.secretForAlg(t);else{let e=await D.get(this);if(!e)throw TypeError(`no keystore present for client, cannot sign using alg ${t}`);if(!(n=e.get({alg:t,use:"sig"})))throw TypeError(`no key to sign with found for alg ${t}`)}s=await new p.CompactSign(new TextEncoder().encode(c)).setProtectedHeader({...a,kid:e?void 0:n.jwk.kid}).sign(e?n:await n.keyObject(t))}if(!r)return s;let l={alg:r,enc:i,cty:"oauth-authz-req+jwt"};return l.alg.match(/^(RSA|ECDH)/)?[n]=await U.call(this.issuer,{alg:l.alg,use:"enc"},{allowMulti:!0}):n=this.secretForAlg("dir"===l.alg?l.enc:l.alg),new p.CompactEncrypt(new TextEncoder().encode(s)).setProtectedHeader({...l,kid:n instanceof Uint8Array?void 0:n.jwk.kid}).encrypt(n instanceof Uint8Array?n:await n.keyObject(l.alg))}async pushedAuthorizationRequest(e={},{clientAssertionPayload:t}={}){v(this.issuer,"pushed_authorization_request_endpoint");let r={..."request"in e?e:H.call(this,e),client_id:this.client_id},i=await R.call(this,"pushed_authorization_request",{responseType:"json",form:r},{clientAssertionPayload:t,endpointAuthMethod:"token"}),s=k(i,{statusCode:201});if(!("expires_in"in s))throw new A({message:"expected expires_in in Pushed Authorization Successful Response",response:i});if("number"!=typeof s.expires_in)throw new A({message:"invalid expires_in value in Pushed Authorization Successful Response",response:i});if(!("request_uri"in s))throw new A({message:"expected request_uri in Pushed Authorization Successful Response",response:i});if("string"!=typeof s.request_uri)throw new A({message:"invalid request_uri value in Pushed Authorization Successful Response",response:i});return s}get issuer(){return this.#t}[s.custom](){return`${this.constructor.name} ${s(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}fapi(){return this.fapi1()||this.fapi2()}fapi1(){return"FAPI1Client"===this.constructor.name}fapi2(){return"FAPI2Client"===this.constructor.name}async validateJARM(e){let t=this.authorization_signed_response_alg,{payload:r}=await this.validateJWT(e,t,["iss","exp","aud"]);return z(r)}async dpopProof(e,t,r){let s;if(!x(e))throw TypeError("payload must be a plain object");if(f(t))s=t;else if("CryptoKey"===t[Symbol.toStringTag])s=t;else if("node:crypto"===p.cryptoRuntime)s=o.createPrivateKey(t);else throw TypeError("unrecognized crypto runtime");if("private"!==s.type)throw TypeError('"DPoP" option must be a private key');let n=i.call(this,s,t);if(!n)throw TypeError("could not determine DPoP JWS Algorithm");return new p.SignJWT({ath:r?m.encode(o.createHash("sha256").update(r).digest()):void 0,...e}).setProtectedHeader({alg:n,typ:"dpop+jwt",jwk:await ee(s,t)}).setIssuedAt().setJti(N()).sign(s)}}function X(e){switch(e.algorithm.name){case"Ed25519":case"Ed448":return"EdDSA";case"ECDSA":switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512"}break;case"RSASSA-PKCS1-v1_5":return`RS${e.algorithm.hash.name.slice(4)}`;case"RSA-PSS":return`PS${e.algorithm.hash.name.slice(4)}`;default:throw TypeError("unsupported DPoP private key")}}if("node:crypto"===p.cryptoRuntime){i=function(i,o){if("CryptoKey"===o[Symbol.toStringTag])return X(i);switch(i.asymmetricKeyType){case"ed25519":case"ed448":return"EdDSA";case"ec":return function(e,i){switch("object"==typeof i&&"object"==typeof i.key&&i.key.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-512":return"ES512"}let o=e.export({format:"der",type:"pkcs8"}),a=o[1]<128?17:18,c=o[a],l=o.slice(a+1,a+1+c);if(l.equals(t))return"ES256";if(l.equals(r))return"ES384";if(l.equals(s))return"ES512";if(l.equals(n))return"ES256K";throw TypeError("unsupported DPoP private key curve")}(i,o);case"rsa":case q&&"rsa-pss":return function(t,r,i){if("object"==typeof r&&"jwk"===r.format&&r.key&&r.key.alg)return r.key.alg;if(Array.isArray(i)){let r=i.filter(RegExp.prototype.test.bind(e));return"rsa-pss"===t.asymmetricKeyType&&(r=r.filter(e=>e.startsWith("PS"))),["PS256","PS384","PS512","RS256","RS384","RS384"].find(e=>r.includes(e))}return"PS256"}(i,o,this.issuer.dpop_signing_alg_values_supported);default:throw TypeError("unsupported DPoP private key")}};let e=/^(?:RS|PS)(?:256|384|512)$/,t=Buffer.from([42,134,72,206,61,3,1,7]),r=Buffer.from([43,129,4,0,34]),s=Buffer.from([43,129,4,0,35]),n=Buffer.from([43,129,4,0,10])}else i=X;let Z=new WeakMap;async function ee(e,t){if("node:crypto"===p.cryptoRuntime&&"object"==typeof t&&"object"==typeof t.key&&"jwk"===t.format)return b(t.key,"kty","crv","x","y","e","n");if(Z.has(t))return Z.get(t);let r=b(await p.exportJWK(e),"kty","crv","x","y","e","n");return(f(t)||"WebCryptoAPI"===p.cryptoRuntime)&&Z.set(t,r),r}e.exports=(e,t=!1)=>class extends Y{constructor(...r){super(e,t,...r)}static get issuer(){return e}},e.exports.BaseClient=Y},16670:(e,t,r)=>{let{inspect:i}=r(21764),{RPError:s,OPError:n}=r(80994),o=r(46438);class a{#s;#n;#o;#a;#c;#l;#u;#h;#p;constructor({client:e,exchangeBody:t,clientAssertionPayload:r,response:i,maxAge:n,DPoP:a}){if(["verification_uri","user_code","device_code"].forEach(e=>{if("string"!=typeof i[e]||!i[e])throw new s(`expected ${e} string to be returned by Device Authorization Response, got %j`,i[e])}),!Number.isSafeInteger(i.expires_in))throw new s("expected expires_in number to be returned by Device Authorization Response, got %j",i.expires_in);this.#l=o()+i.expires_in,this.#n=e,this.#a=a,this.#h=n,this.#c=t,this.#o=r,this.#p=i,this.#u=1e3*i.interval||5e3}abort(){this.#s=!0}async poll({signal:e}={}){let t;if(e&&e.aborted||this.#s)throw new s("polling aborted");if(this.expired())throw new s("the device code %j has expired and the device authorization session has concluded",this.device_code);await new Promise(e=>setTimeout(e,this.#u));try{t=await this.#n.grant({...this.#c,grant_type:"urn:ietf:params:oauth:grant-type:device_code",device_code:this.device_code},{clientAssertionPayload:this.#o,DPoP:this.#a})}catch(t){switch(t instanceof n&&t.error){case"slow_down":this.#u+=5e3;case"authorization_pending":return this.poll({signal:e});default:throw t}}return"id_token"in t&&(await this.#n.decryptIdToken(t),await this.#n.validateIdToken(t,void 0,"token",this.#h)),t}get device_code(){return this.#p.device_code}get user_code(){return this.#p.user_code}get verification_uri(){return this.#p.verification_uri}get verification_uri_complete(){return this.#p.verification_uri_complete}get expires_in(){return Math.max.apply(null,[this.#l-o(),0])}expired(){return 0===this.expires_in}[i.custom](){return`${this.constructor.name} ${i(this.#p,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}}e.exports=a},80994:(e,t,r)=>{let{format:i}=r(21764);class s extends Error{constructor({error_description:e,error:t,error_uri:r,session_state:i,state:s,scope:n},o){super(e?`${t} (${e})`:t),Object.assign(this,{error:t},e&&{error_description:e},r&&{error_uri:r},s&&{state:s},n&&{scope:n},i&&{session_state:i}),o&&Object.defineProperty(this,"response",{value:o}),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class n extends Error{constructor(...e){if("string"==typeof e[0])super(i(...e));else{let{message:t,printf:r,response:s,...n}=e[0];r?super(i(...r)):super(t),Object.assign(this,n),s&&Object.defineProperty(this,"response",{value:s})}this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}e.exports={OPError:s,RPError:n}},914:e=>{e.exports={assertSigningAlgValuesSupport:function(e,t,r){if(!t[`${e}_endpoint`])return;let i=`${e}_endpoint_auth_method`,s=`${e}_endpoint_auth_signing_alg`,n=`${e}_endpoint_auth_signing_alg_values_supported`;if(r[i]&&r[i].endsWith("_jwt")&&!r[s]&&!t[n])throw TypeError(`${n} must be configured on the issuer if ${s} is not defined on a client`)},assertIssuerConfiguration:function(e,t){if(!e[t])throw TypeError(`${t} must be configured on the issuer`)}}},69080:e=>{let t;if(Buffer.isEncoding("base64url"))t=(e,t="utf8")=>Buffer.from(e,t).toString("base64url");else{let e=e=>e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");t=(t,r="utf8")=>e(Buffer.from(t,r).toString("base64"))}e.exports.decode=e=>Buffer.from(e,"base64"),e.exports.encode=t},36223:(e,t,r)=>{let i=r(39797),{RPError:s}=r(80994),{assertIssuerConfiguration:n}=r(914),{random:o}=r(47389),a=r(46438),c=r(82472),{keystores:l}=r(25602),u=r(49366),h=e=>encodeURIComponent(e).replace(/%20/g,"+");async function p(e,t){let r=this[`${e}_endpoint_auth_signing_alg`];if(r||n(this.issuer,`${e}_endpoint_auth_signing_alg_values_supported`),"client_secret_jwt"===this[`${e}_endpoint_auth_method`]){if(!r){let t=this.issuer[`${e}_endpoint_auth_signing_alg_values_supported`];r=Array.isArray(t)&&t.find(e=>/^HS(?:256|384|512)/.test(e))}if(!r)throw new s(`failed to determine a JWS Algorithm to use for ${this[`${e}_endpoint_auth_method`]} Client Assertion`);return new i.CompactSign(Buffer.from(JSON.stringify(t))).setProtectedHeader({alg:r}).sign(this.secretForAlg(r))}let o=await l.get(this);if(!o)throw TypeError("no client jwks provided for signing a client assertion with");if(!r){let t=this.issuer[`${e}_endpoint_auth_signing_alg_values_supported`];r=Array.isArray(t)&&t.find(e=>o.get({alg:e,use:"sig"}))}if(!r)throw new s(`failed to determine a JWS Algorithm to use for ${this[`${e}_endpoint_auth_method`]} Client Assertion`);let a=o.get({alg:r,use:"sig"});if(!a)throw new s(`no key found in client jwks to sign a client assertion with using alg ${r}`);return new i.CompactSign(Buffer.from(JSON.stringify(t))).setProtectedHeader({alg:r,kid:a.jwk&&a.jwk.kid}).sign(await a.keyObject(r))}async function d(e,{clientAssertionPayload:t}={}){switch(this[`${e}_endpoint_auth_method`]){case"self_signed_tls_client_auth":case"tls_client_auth":case"none":return{form:{client_id:this.client_id}};case"client_secret_post":if("string"!=typeof this.client_secret)throw TypeError("client_secret_post client authentication method requires a client_secret");return{form:{client_id:this.client_id,client_secret:this.client_secret}};case"private_key_jwt":case"client_secret_jwt":{let r=a(),i=await p.call(this,e,{iat:r,exp:r+60,jti:o(),iss:this.client_id,sub:this.client_id,aud:this.issuer.issuer,...t});return{form:{client_id:this.client_id,client_assertion:i,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}}case"client_secret_basic":{if("string"!=typeof this.client_secret)throw TypeError("client_secret_basic client authentication method requires a client_secret");let e=`${h(this.client_id)}:${h(this.client_secret)}`,t=Buffer.from(e).toString("base64");return{headers:{Authorization:`Basic ${t}`}}}default:throw TypeError(`missing, or unsupported, ${e}_endpoint_auth_method`)}}async function f(e,t,{clientAssertionPayload:r,endpointAuthMethod:i=e,DPoP:s}={}){let n;let o=u(t,await d.call(this,i,{clientAssertionPayload:r})),a=this[`${i}_endpoint_auth_method`].includes("tls_client_auth")||"token"===e&&this.tls_client_certificate_bound_access_tokens;if(a&&this.issuer.mtls_endpoint_aliases&&(n=this.issuer.mtls_endpoint_aliases[`${e}_endpoint`]),n=n||this.issuer[`${e}_endpoint`],"form"in o)for(let[e,t]of Object.entries(o.form))void 0===t&&delete o.form[e];return c.call(this,{...o,method:"POST",url:n,headers:{..."revocation"!==e?{Accept:"application/json"}:void 0,...o.headers}},{mTLS:a,DPoP:s})}e.exports={resolveResponseType:function(){let{length:e,0:t}=this.response_types;if(1===e)return t},resolveRedirectUri:function(){let{length:e,0:t}=this.redirect_uris||[];if(1===e)return t},authFor:d,authenticatedPost:f}},77731:e=>{let t=Symbol(),r=Symbol();e.exports={CLOCK_TOLERANCE:r,HTTP_OPTIONS:t}},45820:(e,t,r)=>{let i=r(69080);e.exports=e=>{if("string"!=typeof e||!e)throw TypeError("JWT must be a string");let{0:t,1:r,2:s,length:n}=e.split(".");if(5===n)throw TypeError("encrypted JWTs cannot be decoded");if(3!==n)throw Error("JWTs must have three components");try{return{header:JSON.parse(i.decode(t)),payload:JSON.parse(i.decode(r)),signature:s}}catch(e){throw Error("JWT is malformed")}}},52936:e=>{e.exports=globalThis.structuredClone||(e=>JSON.parse(JSON.stringify(e)))},69054:(e,t,r)=>{let i=r(8140);function s(e,t,...r){for(let n of r)if(i(n))for(let[r,o]of Object.entries(n))"__proto__"!==r&&"constructor"!==r&&(void 0===t[r]&&void 0!==o&&(t[r]=o),e&&i(t[r])&&i(o)&&s(!0,t[r],o));return t}e.exports=s.bind(void 0,!1),e.exports.deep=s.bind(void 0,!0)},47389:(e,t,r)=>{let{createHash:i,randomBytes:s}=r(84770),n=r(69080),o=(e=32)=>n.encode(s(e));e.exports={random:o,state:o,nonce:o,codeVerifier:o,codeChallenge:e=>n.encode(i("sha256").update(e).digest())}},74655:(e,t,r)=>{let i=r(21764),s=r(84770);e.exports=i.types.isKeyObject||(e=>e&&e instanceof s.KeyObject)},8140:e=>{e.exports=e=>!!e&&e.constructor===Object},92792:(e,t,r)=>{let i=r(75871),s=r(50901),{RPError:n}=r(80994),{assertIssuerConfiguration:o}=r(914),a=r(56310),{keystores:c}=r(25602),l=r(83818),u=r(82472),h=new WeakMap,p=new WeakMap,d=e=>(p.has(e)||p.set(e,new s({max:100})),p.get(e));async function f(e=!1){o(this,"jwks_uri");let t=c.get(this),r=d(this);return e||!t?(h.has(this)||(r.reset(),h.set(this,(async()=>{let e=l(await u.call(this,{method:"GET",responseType:"json",url:this.jwks_uri,headers:{Accept:"application/json, application/jwk-set+json"}}).finally(()=>{h.delete(this)})),t=a.fromJWKS(e,{onlyPublic:!0});return r.set("throttle",!0,6e4),c.set(this,t),t})())),h.get(this)):t}async function _({kid:e,kty:t,alg:r,use:s},{allowMulti:o=!1}={}){let a=d(this),c={kid:e,kty:t,alg:r,use:s},l=i(c,{algorithm:"sha256",ignoreUnknown:!0,unorderedArrays:!0,unorderedSets:!0,respectType:!1}),u=a.get(l)||a.get("throttle"),h=await f.call(this,!u),p=h.all(c);if(delete c.use,0===p.length)throw new n({printf:["no valid key found in issuer's jwks_uri for key parameters %j",c],jwks:h});if(!o&&p.length>1&&!e)throw new n({printf:["multiple matching keys found in issuer's jwks_uri for key parameters %j, kid must be provided in this case",c],jwks:h});return a.set(l,!0),p}e.exports.queryKeyStore=_,e.exports.keystore=f},56310:(e,t,r)=>{let i=r(39797),s=r(52936),n=r(8140),o=Symbol(),a=(e,{alg:t,use:r})=>{let i=0;return t&&e.alg&&i++,r&&e.use&&i++,i};e.exports=class{#d;constructor(e,t){if(e!==o)throw Error("invalid constructor call");this.#d=t}toJWKS(){return{keys:this.map(({jwk:{d:e,p:t,q:r,dp:i,dq:s,qi:n,...o}})=>o)}}all({alg:e,kid:t,use:r}={}){if(!r||!e)throw Error();let i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:return}}(e),s={alg:e,use:r};return this.filter(s=>{let n=!0;return void 0!==i&&s.jwk.kty!==i&&(n=!1),n&&void 0!==t&&s.jwk.kid!==t&&(n=!1),n&&void 0!==r&&void 0!==s.jwk.use&&s.jwk.use!==r&&(n=!1),n&&s.jwk.alg&&s.jwk.alg!==e?n=!1:s.algorithms.has(e)||(n=!1),n}).sort((e,t)=>a(t,s)-a(e,s))}get(...e){return this.all(...e)[0]}static async fromJWKS(e,{onlyPublic:t=!1,onlyPrivate:r=!1}={}){if(!n(e)||!Array.isArray(e.keys)||e.keys.some(e=>!n(e)||!("kty"in e)))throw TypeError("jwks must be a JSON Web Key Set formatted object");let a=[];for(let n of e.keys){let{kty:e,kid:o,crv:c}=n=s(n),{alg:l,use:u}=n;if("string"==typeof e&&e&&(void 0===u||"sig"===u||"enc"===u)&&("string"==typeof l||void 0===l)&&("string"==typeof o||void 0===o)){if("EC"===e&&"sig"===u)switch(c){case"P-256":l="ES256";break;case"P-384":l="ES384";break;case"P-521":l="ES512"}if("secp256k1"===c&&(u="sig",l="ES256K"),"OKP"===e)switch(c){case"Ed25519":case"Ed448":u="sig",l="EdDSA";break;case"X25519":case"X448":u="enc"}if(l&&!u)switch(!0){case l.startsWith("ECDH"):case l.startsWith("RSA"):u="enc"}if(r&&("oct"===n.kty||!n.d))throw Error("jwks must only contain private keys");t&&(n.d||n.k)||a.push({jwk:{...n,alg:l,use:u},async keyObject(e){if(this[e])return this[e];let t=await i.importJWK(this.jwk,e);return this[e]=t,t},get algorithms(){return Object.defineProperty(this,"algorithms",{value:function(e,t,r,s){if(t)return new Set([t]);switch(r){case"EC":{let t=[];if(("enc"===e||void 0===e)&&(t=t.concat(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"])),"sig"===e||void 0===e)switch(s){case"P-256":case"P-384":t=t.concat([`ES${s.slice(-3)}`]);break;case"P-521":t=t.concat(["ES512"]);break;case"secp256k1":"node:crypto"===i.cryptoRuntime&&(t=t.concat(["ES256K"]))}return new Set(t)}case"OKP":return new Set(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"]);case"RSA":{let t=[];return("enc"===e||void 0===e)&&(t=t.concat(["RSA-OAEP","RSA-OAEP-256","RSA-OAEP-384","RSA-OAEP-512"]),"node:crypto"===i.cryptoRuntime&&(t=t.concat(["RSA1_5"]))),("sig"===e||void 0===e)&&(t=t.concat(["PS256","PS384","PS512","RS256","RS384","RS512"])),new Set(t)}default:throw Error("unreachable")}}(this.jwk.use,this.jwk.alg,this.jwk.kty,this.jwk.crv),enumerable:!0,configurable:!1}),this.algorithms}})}}return new this(o,a)}filter(...e){return this.#d.filter(...e)}find(...e){return this.#d.find(...e)}every(...e){return this.#d.every(...e)}some(...e){return this.#d.some(...e)}map(...e){return this.#d.map(...e)}forEach(...e){return this.#d.forEach(...e)}reduce(...e){return this.#d.reduce(...e)}sort(...e){return this.#d.sort(...e)}*[Symbol.iterator](){for(let e of this.#d)yield e}}},49366:(e,t,r)=>{let i=r(8140);e.exports=function e(t,...r){for(let s of r)if(i(s))for(let[r,n]of Object.entries(s))"__proto__"!==r&&"constructor"!==r&&(i(t[r])&&i(n)?t[r]=e(t[r],n):void 0!==n&&(t[r]=n));return t}},58945:e=>{e.exports=function(e,...t){let r={};for(let i of t)void 0!==e[i]&&(r[i]=e[i]);return r}},83818:(e,t,r)=>{let{STATUS_CODES:i}=r(32615),{format:s}=r(21764),{OPError:n}=r(80994),o=r(15070),a=e=>{let t=o(e.headers["www-authenticate"]);if(t.error)throw new n(t,e)},c=e=>{let t=!1;try{let r;"object"!=typeof e.body||Buffer.isBuffer(e.body)?r=JSON.parse(e.body):r=e.body,(t="string"==typeof r.error&&r.error.length)&&Object.defineProperty(e,"body",{value:r,configurable:!0})}catch(e){}return t};e.exports=function(e,{statusCode:t=200,body:r=!0,bearer:o=!1}={}){if(e.statusCode!==t){if(o&&a(e),c(e))throw new n(e.body,e);throw new n({error:s("expected %i %s, got: %i %s",t,i[t],e.statusCode,i[e.statusCode])},e)}if(r&&!e.body)throw new n({error:s("expected %i %s with body but no body was returned",t,i[t])},e);return e.body}},82472:(e,t,r)=>{let i;let s=r(27790),n=r(86624),o=r(32615),a=r(35240),{once:c}=r(17702),{URL:l}=r(17360),u=r(50901),h=r(87658),{RPError:p}=r(80994),d=r(58945),{deep:f}=r(69054),{HTTP_OPTIONS:_}=r(77731),m=/^[\x21\x23-\x5B\x5D-\x7E]+$/,g=["agent","ca","cert","crl","headers","key","lookup","passphrase","pfx","timeout"],y=(e,t)=>{i=f({},e.length?d(t,...e):t,i)};function w(e,t,r){r&&(e.removeHeader("content-type"),e.setHeader("content-type",r)),t&&(e.removeHeader("content-length"),e.setHeader("content-length",Buffer.byteLength(t)),e.write(t)),e.end()}y([],{headers:{"User-Agent":`${h.name}/${h.version} (${h.homepage})`,"Accept-Encoding":"identity"},timeout:3500});let v=new u({max:100});e.exports=async function(e,{accessToken:t,mTLS:r=!1,DPoP:u}={}){let h,y,b,x,k,E,T;try{h=new l(e.url),delete e.url,s(/^(https?:)$/.test(h.protocol))}catch(e){throw TypeError("only valid absolute URLs can be requested")}let A=this[_],S=e,N=`${h.origin}${h.pathname}`;if(u&&"dpopProof"in this&&(S.headers=S.headers||{},S.headers.DPoP=await this.dpopProof({htu:`${h.origin}${h.pathname}`,htm:e.method||"GET",nonce:v.get(N)},u,t)),A&&(y=d(A.call(this,h,f({},S,i)),...g)),S=f({},y,S,i),r&&!S.pfx&&!(S.key&&S.cert))throw TypeError("mutual-TLS certificate and key not set");if(S.searchParams)for(let[e,t]of Object.entries(S.searchParams))h.searchParams.delete(e),h.searchParams.set(e,t);for(let[e,t]of({form:x,responseType:b,json:k,body:E,...S}=S,Object.entries(S.headers||{})))void 0===t&&delete S.headers[e];let O=("https:"===h.protocol?a.request:o.request)(h.href,S);return(async()=>{if(k?w(O,JSON.stringify(k),"application/json"):x?w(O,n.stringify(x),"application/x-www-form-urlencoded"):E?w(O,E):w(O),[T]=await Promise.race([c(O,"response"),c(O,"timeout")]),!T)throw O.destroy(),new p(`outgoing request timed out after ${S.timeout}ms`);let e=[];for await(let t of T)e.push(t);if(e.length)switch(b){case"json":Object.defineProperty(T,"body",{get(){let t=Buffer.concat(e);try{t=JSON.parse(t)}catch(e){throw Object.defineProperty(e,"response",{value:T}),e}finally{Object.defineProperty(T,"body",{value:t,configurable:!0})}return t},configurable:!0});break;case void 0:case"buffer":Object.defineProperty(T,"body",{get(){let t=Buffer.concat(e);return Object.defineProperty(T,"body",{value:t,configurable:!0}),t},configurable:!0});break;default:throw TypeError("unsupported responseType request option")}return T})().catch(e=>{throw T&&Object.defineProperty(e,"response",{value:T}),e}).finally(()=>{let e=T&&T.headers["dpop-nonce"];e&&m.test(e)&&v.set(N,e)})},e.exports.setDefaults=y.bind(void 0,g)},46438:e=>{e.exports=()=>Math.floor(Date.now()/1e3)},25602:e=>{e.exports.keystores=new WeakMap},91578:e=>{let t=/^\d+$/;e.exports=function(e){if("string"!=typeof e)throw TypeError("input must be a string");return(!function(e){if(e.includes("://"))return!0;let r=e.replace(/(\/|\?)/g,"#").split("#")[0];if(r.includes(":")){let e=r.indexOf(":"),i=r.slice(e+1);if(!t.test(i))return!0}return!1}(e)?!function(e){if(!e.includes("@"))return!1;let t=e.split("@"),r=t[t.length-1];return!(r.includes(":")||r.includes("/")||r.includes("?"))}(e)?`https://${e}`:`acct:${e}`:e).split("#")[0]}},15070:e=>{let t=/(\w+)=("[^"]*")/g;e.exports=e=>{let r={};try{for(;null!==t.exec(e);)RegExp.$1&&RegExp.$2&&(r[RegExp.$1]=RegExp.$2.slice(1,-1))}catch(e){}return r}},77838:(e,t,r)=>{let i=r(99197),{OPError:s,RPError:n}=r(80994),o=r(74202),a=r(80536),{CLOCK_TOLERANCE:c,HTTP_OPTIONS:l}=r(77731),u=r(47389),{setDefaults:h}=r(82472);e.exports={Issuer:i,Strategy:o,TokenSet:a,errors:{OPError:s,RPError:n},custom:{setHttpOptionsDefaults:h,http_options:l,clock_tolerance:c},generators:u}},99197:(e,t,r)=>{let{inspect:i}=r(21764),s=r(17360),{RPError:n}=r(80994),o=r(80137),a=r(89123),c=r(83818),l=r(91578),u=r(82472),h=r(52936),{keystore:p}=r(92792),d=["https://login.microsoftonline.com/common/.well-known/openid-configuration","https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration"],f=Symbol(),_={claim_types_supported:["normal"],claims_parameter_supported:!1,grant_types_supported:["authorization_code","implicit"],request_parameter_supported:!1,request_uri_parameter_supported:!0,require_request_uri_registration:!1,response_modes_supported:["query","fragment"],token_endpoint_auth_methods_supported:["client_secret_basic"]};class m{#e;constructor(e={}){let t=e[f];delete e[f],["introspection","revocation"].forEach(t=>{e[`${t}_endpoint`]&&void 0===e[`${t}_endpoint_auth_methods_supported`]&&void 0===e[`${t}_endpoint_auth_signing_alg_values_supported`]&&(e.token_endpoint_auth_methods_supported&&(e[`${t}_endpoint_auth_methods_supported`]=e.token_endpoint_auth_methods_supported),e.token_endpoint_auth_signing_alg_values_supported&&(e[`${t}_endpoint_auth_signing_alg_values_supported`]=e.token_endpoint_auth_signing_alg_values_supported))}),this.#e=new Map,Object.entries(e).forEach(([e,t])=>{this.#e.set(e,t),this[e]||Object.defineProperty(this,e,{get(){return this.#e.get(e)},enumerable:!0})}),a.set(this.issuer,this);let r=o(this,t);Object.defineProperties(this,{Client:{value:r,enumerable:!0},FAPI1Client:{value:class extends r{},enumerable:!0},FAPI2Client:{value:class extends r{},enumerable:!0}})}get metadata(){return h(Object.fromEntries(this.#e.entries()))}static async webfinger(e){let t=l(e),{host:r}=s.parse(t),i=`https://${r}/.well-known/webfinger`,o=c(await u.call(this,{method:"GET",url:i,responseType:"json",searchParams:{resource:t,rel:"http://openid.net/specs/connect/1.0/issuer"},headers:{Accept:"application/json"}})),h=Array.isArray(o.links)&&o.links.find(e=>"object"==typeof e&&"http://openid.net/specs/connect/1.0/issuer"===e.rel&&e.href);if(!h)throw new n({message:"no issuer found in webfinger response",body:o});if("string"!=typeof h.href||!h.href.startsWith("https://"))throw new n({printf:["invalid issuer location %s",h.href],body:o});let p=h.href;if(a.has(p))return a.get(p);let d=await this.discover(p);if(d.issuer!==p)throw a.del(d.issuer),new n("discovered issuer mismatch, expected %s, got: %s",p,d.issuer);return d}static async discover(e){let t=function(e){let t=s.parse(e);if(t.pathname.includes("/.well-known/"))return e;{let e;return e=t.pathname.endsWith("/")?`${t.pathname}.well-known/openid-configuration`:`${t.pathname}/.well-known/openid-configuration`,s.format({...t,pathname:e})}}(e),r=c(await u.call(this,{method:"GET",responseType:"json",url:t,headers:{Accept:"application/json"}}));return new m({..._,...r,[f]:!!d.find(e=>t.startsWith(e))})}async reloadJwksUri(){await p.call(this,!0)}[i.custom](){return`${this.constructor.name} ${i(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}}e.exports=m},89123:(e,t,r)=>{let i=r(50901);e.exports=new i({max:100})},74202:(e,t,r)=>{let i=r(17360),{format:s}=r(21764),n=r(52936),{RPError:o,OPError:a}=r(80994),{BaseClient:c}=r(80137),{random:l,codeChallenge:u}=r(47389),h=r(58945),{resolveResponseType:p,resolveRedirectUri:d}=r(36223);function f(e,t,r={}){e?this.error(e):t?this.success(t,r):this.fail(r)}function _({client:e,params:t={},passReqToCallback:r=!1,sessionKey:s,usePKCE:o=!0,extras:a={}}={},l){if(!(e instanceof c))throw TypeError("client must be an instance of openid-client Client");if("function"!=typeof l)throw TypeError("verify callback must be a function");if(!e.issuer||!e.issuer.issuer)throw TypeError("client must have an issuer with an identifier");if(this._client=e,this._issuer=e.issuer,this._verify=l,this._passReqToCallback=r,this._usePKCE=o,this._key=s||`oidc:${i.parse(this._issuer.issuer).hostname}`,this._params=n(t),delete this._params.state,delete this._params.nonce,this._extras=n(a),this._params.response_type||(this._params.response_type=p.call(e)),this._params.redirect_uri||(this._params.redirect_uri=d.call(e)),this._params.scope||(this._params.scope="openid"),!0===this._usePKCE){let e=!!Array.isArray(this._issuer.code_challenge_methods_supported)&&this._issuer.code_challenge_methods_supported;if(e&&e.includes("S256"))this._usePKCE="S256";else if(e&&e.includes("plain"))this._usePKCE="plain";else if(e)throw TypeError("neither code_challenge_method supported by the client is supported by the issuer");else this._usePKCE="S256"}else if("string"==typeof this._usePKCE&&!["plain","S256"].includes(this._usePKCE))throw TypeError(`${this._usePKCE} is not valid/implemented PKCE code_challenge_method`);this.name=i.parse(e.issuer.issuer).hostname}_.prototype.authenticate=function(e,t){(async()=>{let r=this._client;if(!e.session)throw TypeError("authentication requires session support");let i=r.callbackParams(e),n=this._key,{0:a,length:c}=Object.keys(i);if(0===c||1===c&&"iss"===a){let i={state:l(),...this._params,...t};if(!i.nonce&&i.response_type.includes("id_token")&&(i.nonce=l()),e.session[n]=h(i,"nonce","state","max_age","response_type"),this._usePKCE&&i.response_type.includes("code")){let t=l();switch(e.session[n].code_verifier=t,this._usePKCE){case"S256":i.code_challenge=u(t),i.code_challenge_method="S256";break;case"plain":i.code_challenge=t}}this.redirect(r.authorizationUrl(i));return}let p=e.session[n];if(0===Object.keys(p||{}).length)throw Error(s('did not find expected authorization request details in session, req.session["%s"] is %j',n,p));let{state:d,nonce:_,max_age:m,code_verifier:g,response_type:y}=p;try{delete e.session[n]}catch(e){}let w={redirect_uri:this._params.redirect_uri,...t},v=await r.callback(w.redirect_uri,i,{state:d,nonce:_,max_age:m,code_verifier:g,response_type:y},this._extras),b=this._passReqToCallback,x=this._verify.length>(b?3:2)&&r.issuer.userinfo_endpoint,k=[v,f.bind(this)];if(x){if(!v.access_token)throw new o({message:"expected access_token to be returned when asking for userinfo in verify callback",tokenset:v});let e=await r.userinfo(v);k.splice(1,0,e)}b&&k.unshift(e),this._verify(...k)})().catch(e=>{e instanceof a&&"server_error"!==e.error&&!e.error.startsWith("invalid")||e instanceof o?this.fail(e):this.error(e)})},e.exports=_},80536:(e,t,r)=>{let i=r(69080),s=r(46438);class n{constructor(e){Object.assign(this,e);let{constructor:t,...r}=Object.getOwnPropertyDescriptors(this.constructor.prototype);Object.defineProperties(this,r)}set expires_in(e){this.expires_at=s()+Number(e)}get expires_in(){return Math.max.apply(null,[this.expires_at-s(),0])}expired(){return 0===this.expires_in}claims(){if(!this.id_token)throw TypeError("id_token not present in TokenSet");return JSON.parse(i.decode(this.id_token.split(".")[1]))}}e.exports=n},50901:(e,t,r)=>{"use strict";let i=r(10517),s=Symbol("max"),n=Symbol("length"),o=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),u=Symbol("noDisposeOnSet"),h=Symbol("lruList"),p=Symbol("cache"),d=Symbol("updateAgeOnGet"),f=()=>1;class _{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[s]=e.max||1/0;let t=e.length||f;if(this[o]="function"!=typeof t?f:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[d]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[s]=e||1/0,y(this)}get max(){return this[s]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[c]=e,y(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[o]&&(this[o]=e,this[n]=0,this[h].forEach(e=>{e.length=this[o](e.value,e.key),this[n]+=e.length})),y(this)}get lengthCalculator(){return this[o]}get length(){return this[n]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let r=this[h].tail;null!==r;){let i=r.prev;b(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[h].head;null!==r;){let i=r.next;b(this,e,r,t),r=i}}keys(){return this[h].toArray().map(e=>e.key)}values(){return this[h].toArray().map(e=>e.value)}reset(){this[l]&&this[h]&&this[h].length&&this[h].forEach(e=>this[l](e.key,e.value)),this[p]=new Map,this[h]=new i,this[n]=0}dump(){return this[h].map(e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[h]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let i=r?Date.now():0,a=this[o](t,e);if(this[p].has(e)){if(a>this[s])return w(this,this[p].get(e)),!1;let o=this[p].get(e).value;return this[l]&&!this[u]&&this[l](e,o.value),o.now=i,o.maxAge=r,o.value=t,this[n]+=a-o.length,o.length=a,this.get(e),y(this),!0}let d=new v(e,t,a,i,r);return d.length>this[s]?(this[l]&&this[l](e,t),!1):(this[n]+=d.length,this[h].unshift(d),this[p].set(e,this[h].head),y(this),!0)}has(e){return!!this[p].has(e)&&!g(this,this[p].get(e).value)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){let e=this[h].tail;return e?(w(this,e),e.value):null}del(e){w(this,this[p].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(0===s)this.set(i.k,i.v);else{let e=s-t;e>0&&this.set(i.k,i.v,e)}}}prune(){this[p].forEach((e,t)=>m(this,t,!1))}}let m=(e,t,r)=>{let i=e[p].get(t);if(i){let t=i.value;if(g(e,t)){if(w(e,i),!e[a])return}else r&&(e[d]&&(i.value.now=Date.now()),e[h].unshiftNode(i));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},y=e=>{if(e[n]>e[s])for(let t=e[h].tail;e[n]>e[s]&&null!==t;){let r=t.prev;w(e,t),t=r}},w=(e,t)=>{if(t){let r=t.value;e[l]&&e[l](r.key,r.value),e[n]-=r.length,e[p].delete(r.key),e[h].removeNode(t)}};class v{constructor(e,t,r,i,s){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=s||0}}let b=(e,t,r,i)=>{let s=r.value;g(e,s)&&(w(e,r),e[a]||(s=void 0)),s&&t.call(i,s.value,s.key,e)};e.exports=_},8907:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},10517:(e,t,r)=>{"use strict";function i(e){var t=this;if(t instanceof i||(t=new i),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)t.push(arguments[r]);return t}function s(e,t,r,i){if(!(this instanceof s))return new s(e,t,r,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=i,i.Node=s,i.create=i,i.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},i.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},i.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},i.prototype.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.tail=new s(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},i.prototype.unshift=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.head=new s(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},i.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},i.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},i.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,i=0;null!==r;i++)e.call(t,r.value,i,this),r=r.next},i.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,i=this.length-1;null!==r;i--)e.call(t,r.value,i,this),r=r.prev},i.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},i.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},i.prototype.map=function(e,t){t=t||this;for(var r=new i,s=this.head;null!==s;)r.push(e.call(t,s.value,this)),s=s.next;return r},i.prototype.mapReverse=function(e,t){t=t||this;for(var r=new i,s=this.tail;null!==s;)r.push(e.call(t,s.value,this)),s=s.prev;return r},i.prototype.reduce=function(e,t){var r,i=this.head;if(arguments.length>1)r=t;else if(this.head)i=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var s=0;null!==i;s++)r=e(r,i.value,s),i=i.next;return r},i.prototype.reduceReverse=function(e,t){var r,i=this.tail;if(arguments.length>1)r=t;else if(this.tail)i=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;null!==i;s--)r=e(r,i.value,s),i=i.prev;return r},i.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},i.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},i.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new i;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=0,n=this.head;null!==n&&s<e;s++)n=n.next;for(;null!==n&&s<t;s++,n=n.next)r.push(n.value);return r},i.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new i;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=this.length,n=this.tail;null!==n&&s>t;s--)n=n.prev;for(;null!==n&&s>e;s--,n=n.prev)r.push(n.value);return r},i.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,n=this.head;null!==n&&i<e;i++)n=n.next;for(var o=[],i=0;n&&i<t;i++)o.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var i=0;i<r.length;i++)n=function(e,t,r){var i=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}(this,n,r[i]);return o},i.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=t,this.tail=e,this};try{r(8907)(i)}catch(e){}},97946:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(19510),s=r(64099),n=r(58585);let o=(0,r(68570).createProxy)(String.raw`/Users/bash/Documents/GitHub/crypticApp/src/components/crypto/CoinDetails/CoinDetails.tsx#CoinDetails`);async function a({params:e}){return await (0,s.getSession)()||(0,n.redirect)("/api/auth/login"),i.jsx(o,{coinId:e.id})}},53768:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>l});var i=r(19510),s=r(68570);let n=(0,s.createProxy)(String.raw`/Users/bash/Documents/GitHub/crypticApp/src/components/providers/Providers.tsx#Providers`),o=(0,s.createProxy)(String.raw`/Users/bash/Documents/GitHub/crypticApp/src/components/auth/AuthProvider/AuthProvider.tsx#AuthProvider`),a=(0,s.createProxy)(String.raw`/Users/bash/Documents/GitHub/crypticApp/src/components/layout/Header/Header.tsx#default`),c=(0,s.createProxy)(String.raw`/Users/bash/Documents/GitHub/crypticApp/src/components/layout/Sidebar/Sidebar.tsx#default`);r(5023);let l={title:"Cryptic - Crypto Dashboard",description:"Real-time cryptocurrency tracking dashboard",metadataBase:new URL(process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000")};function u({children:e}){return i.jsx("html",{lang:"en",className:"h-full bg-gray-50",children:i.jsx("body",{className:"h-full antialiased",children:i.jsx(o,{children:i.jsx(n,{children:(0,i.jsxs)("div",{className:"min-h-full",children:[i.jsx(c,{}),(0,i.jsxs)("div",{className:"lg:pl-64",children:[i.jsx(a,{}),i.jsx("main",{className:"py-8",children:i.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e})})]})]})})})})})}},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(66621);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,i.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{},87658:e=>{"use strict";e.exports=JSON.parse('{"name":"openid-client","version":"5.7.1","description":"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs","keywords":["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],"homepage":"https://github.com/panva/openid-client","repository":"panva/openid-client","funding":{"url":"https://github.com/sponsors/panva"},"license":"MIT","author":"Filip Skokan <panva.ip@gmail.com>","exports":{"types":"./types/index.d.ts","import":"./lib/index.mjs","require":"./lib/index.js"},"main":"./lib/index.js","types":"./types/index.d.ts","files":["lib","types/index.d.ts"],"scripts":{"format":"npx prettier --loglevel silent --write ./lib ./test ./certification ./types","test":"mocha test/**/*.test.js"},"dependencies":{"jose":"^4.15.9","lru-cache":"^6.0.0","object-hash":"^2.2.0","oidc-token-hash":"^5.0.3"},"devDependencies":{"@types/node":"^16.18.106","@types/passport":"^1.0.16","base64url":"^3.0.1","chai":"^4.5.0","mocha":"^10.7.3","nock":"^13.5.5","prettier":"^2.8.8","readable-mock-req":"^0.2.2","sinon":"^9.2.4","timekeeper":"^2.3.1"},"standard-version":{"scripts":{"postchangelog":"sed -i \'\' -e \'s/### \\\\[/## [/g\' CHANGELOG.md"},"types":[{"type":"feat","section":"Features"},{"type":"fix","section":"Fixes"},{"type":"chore","hidden":true},{"type":"docs","hidden":true},{"type":"style","hidden":true},{"type":"refactor","section":"Refactor","hidden":false},{"type":"perf","section":"Performance","hidden":false},{"type":"test","hidden":true}]}}')}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,708,621,211,817],()=>r(48948));module.exports=i})();